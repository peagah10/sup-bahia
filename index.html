<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suplementos BAHIA - Suplementos Alimentares Premium</title>
    <meta name="description" content="Suplementos BAHIA - Suplementos premium para atletas e entusiastas. Whey Protein, Creatina, Vitaminas e mais. Frete grátis!">
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- Open Graph (Facebook/WhatsApp) -->
    <meta property="og:title" content="Suplementos BAHIA - Suplementos com 10% OFF">
    <meta property="og:description" content="Suplementos importados e nacionais com entrega rápida. Aproveite agora!">
    <meta property="og:url" content="https://suplementosbahia.netlify.app">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://suplementosbahia.netlify.app/images/meta.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Suplementos BAHIA - Suplementos com 10% OFF">
    <meta name="twitter:description" content="Desconto exclusivo! Suplementos importados e nacionais com entrega rápida.">
    <meta name="twitter:image" content="https://suplementosbahia.netlify.app/images/meta.png">
    
    <!-- Schema.org para SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "Suplementos BAHIA",
      "description": "Suplementos alimentares de alta qualidade",
      "url": "https://www.suplementosbahia.com.br",
      "telephone": "+5577999152558",
      "image": "https://pfst.cf2.poecdn.net/base/image/d1f85532876f53ac1e8b5772d3928c91b46d0255ed1d3a5dfa568c3ee0207bdc?w=1024&h=1024",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Avenida São José",
        "addressLocality": "Centro, Carinhanha",
        "addressRegion": "BA",
        "postalCode": "47440-000",
        "addressCountry": "BR"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "-14.3053",
        "longitude": "-43.7639"
      }
    }
    </script>
    
    <!-- Fontes e ícones -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/marked@4.0.0/marked.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // Configuração do Tailwind
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#222', // Cor principal melhorada (roxo mais vibrante)
                        secondary: '#25D366', // Cor secundária (ciano)
                        accent: '#25D366', // Cor de destaque (âmbar)
                        dark: {
                            100: '#111',            // Preto mais profundo
                            200: '#222',            // Igual ao primary
                            300: '#1A1A1A',         // Tons de escuro
                            400: '#0D0D0D'
                          },
                          light: {
                            100: '#afafaf',
                            200: '#F5F5F5',         // Cinza claro
                            300: '#EEEEEE',
                            400: '#E0E0E0'
                          }
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                        heading: ['Poppins', 'sans-serif']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.5s ease forwards',
                        'slide-up': 'slideUp 0.5s ease forwards',
                        'slide-right': 'slideRight 0.5s ease forwards',
                        'zoom-in': 'zoomIn 0.5s ease forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        slideRight: {
                            '0%': { transform: 'translateX(-20px)', opacity: '0' },
                            '100%': { transform: 'translateX(0)', opacity: '1' }
                        },
                        zoomIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        }
                    },
                    boxShadow: {
                        'card': '0 4px 20px rgba(0, 0, 0, 0.08)',
                        'card-hover': '0 10px 25px rgba(0, 0, 0, 0.12)',
                        'card-dark': '0 4px 20px rgba(0, 0, 0, 0.25)',
                    },
                    borderRadius: {
                        'xl': '1rem',
                        '2xl': '1.5rem',
                        '3xl': '2rem',
                    }
                }
            }
        }
        
        // Configuração do tema escuro
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    
    <style>
        footer {
            padding: 2.5rem 0; /* py-10 */
        }
        
        footer .container {
            padding-left: 1.5rem; /* px-6 */
            padding-right: 1.5rem;
        }
        
        footer ul li {
            margin-bottom: 0.5rem; /* space-y-2 */
        }
        
        footer h3 {
            margin-bottom: 0.5rem; /* mb-2 */
        }
        /* Cores personalizadas (mantenha apenas uma definição de cada) */
 .text-primary {
     color: #222;
 }
 
 .dark .text-primary {
     color: #afafaf;
 }
 
 .text-secondary {
     color: #25D366;
 }
 
 .bg-primary {
     background-color: #222;
 }
 
 .dark .bg-primary {
     background-color: #afafaf;
 }
 
 .bg-secondary {
     background-color: #25D366;
 }
 
 .border-primary {
     border-color: #222;
 }
 
 .dark .border-primary {
     border-color: #afafaf;
 }
 
 .border-secondary {
     border-color: #25D366;
 }
        
         /* Estilo para o container da logo */
 .logo-container {
     width: 65px;
     height: 65px;
     min-width: 65px;
     min-height: 65px;
     border-radius: 50%;
     overflow: hidden;
     display: flex;
     align-items: center;
     justify-content: center;
     background: #afafaf; /* Pode ser substituído por bg-gray-100 */
     border: 2px solid rgba(255, 255, 255, 0.2);
     box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
     transition: all 0.3s ease;
 }
 
 /* Estilo para a imagem */
 .logo-container img {
     width: 100%;
     height: 100%;
     object-fit: cover;
     transition: transform 0.3s ease;
 }
 
 /* Efeito hover */
 .group:hover .logo-container {
     transform: scale(1.1);
     box-shadow: 0 4px 12px rgba(93, 92, 222, 0.2);
 }
 
 .group:hover .logo-container img {
     transform: scale(1.05);
 }
 
 /* Texto da logo */
 .logo-text {
     font-family: 'Poppins', sans-serif;
     font-size: 1.75rem; /* 28px */
     font-weight: 800;
     letter-spacing: 0.5px;
 }
 
 /* Modo escuro - versão simplificada usando classes Tailwind */
 .dark .logo-container {
    background-color: #222; /* ou use var(--color-dark-200) se definido */
    border-color: rgba(255, 255, 255, 0.1);
}
        
        
        /* Estilos essenciais que não podem ser facilmente substituídos por Tailwind */
        .product-card h3 {
            /* Versão moderna (suportada na maioria dos navegadores) */
            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            
            -webkit-line-clamp: 2;
            -moz-line-clamp: 2;
            -ms-line-clamp: 2;
            line-clamp: 2;
            
            -webkit-box-orient: vertical;
            -moz-box-orient: vertical;
            -ms-box-orient: vertical;
            box-orient: vertical;
            
            overflow: hidden;
            text-overflow: ellipsis;
            min-height: 3em; /* Ajuste conforme necessário */
        }
        
        .product-card-enter {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .product-card-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 300ms, transform 300ms;
        }
        
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
            background-size: cover;
            background-position: center;
        }
        
        .hero-slide.active {
            opacity: 1;
        }
        
        /* Animações e transições personalizadas */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Estilos para o mapa */
        .map-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 56.25%; /* Proporção 16:9 para o mapa */
            border-radius: 1rem;
        }
        
        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        
        /* Efeitos de hover aprimorados */
        .hover-scale {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .hover-scale:hover {
            transform: scale(1.03);
        }
        
        .quick-view-modal {
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        /* Estilo do breadcrumb */
        .breadcrumb-item::after {
            content: '/';
            margin: 0 0.5rem;
            color: #9ca3af;
        }
        
        .breadcrumb-item:last-child::after {
            content: '';
            margin: 0;
        }
        
        /* Barra de rolagem personalizada */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #25D366;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #25D366;
        }
        
        /* Animação de pulsação */
        .btn-pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 #25D366;
            }
            70% {
                box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
            }
        }
        
        /* Personalização de inputs */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            background: #25D366;
            border-radius: 50%;
            cursor: pointer;
        }
        
        input[type=range]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #25D366;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        /* Estilização para select customizado */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em;
        }
        
        /* Dark mode input styles */
        .dark select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        }
        
        /* Estilo do botão do WhatsApp */
        .whatsapp-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #0ecf55;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .whatsapp-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        /* Espaçamento para não sobreposição com o botão de voltar ao topo */
        #back-to-top {
            bottom: 90px;
        }

        /* Estilos responsivos para banners */
        .hero-desktop {
            display: block;
        }
        
        .hero-mobile {
            display: none;
        }
        
        @media (max-width: 768px) {
            .hero-desktop {
                display: none;
            }
            
            .hero-mobile {
                display: block;
            }
        }

        /* Estilos para scroll horizontal nas categorias no mobile */
        .categories-scroll {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE 10+ */
        }
        
        .categories-scroll::-webkit-scrollbar {
            display: none; /* Chrome/Safari/Edge */
        }
        
        @media (max-width: 768px) {
            .categories-scroll {
                scroll-snap-type: x mandatory;
                scroll-behavior: smooth;
            }
            
            .categories-scroll .filter-btn {
                scroll-snap-align: start;
                flex-shrink: 0;
                white-space: nowrap;
            }
        }

        /* Estilos da área administrativa - CORRIGIDO */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            background: #f3f4f6;
            overflow-y: auto;
        }
        
        .admin-panel.active {
            display: block !important;
        }
        
        .dark .admin-panel {
            background: #111827;
        }

        /* Garante que quando admin estiver ativo, nada mais apareça */
        body.admin-active #main-site,
        body.admin-active > header:not(.admin-header) {
            display: none !important;
        }
        
        .admin-nav {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }
        
        .admin-nav-tabs {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            flex-wrap: wrap;
        }
        
        .admin-nav-item {
            padding: 20px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            min-width: 160px;
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .admin-nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .admin-nav-item.active {
            background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%);
            color: white;
        }
        
        .admin-form-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .dark .admin-form-container {
            background-color: #2a2a2a;
        }
        
        .admin-form-input, .admin-form-select, .admin-form-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .dark .admin-form-input, .dark .admin-form-select, .dark .admin-form-textarea {
            background-color: #3a3a3a;
            border-color: #4a5568;
            color: #fff;
        }
        
        .admin-form-input:focus, .admin-form-select:focus, .admin-form-textarea:focus {
            border-color: #5D5CDE;
            outline: none;
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
        }
        
        .admin-form-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #5D5CDE 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-form-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(93, 92, 222, 0.4);
        }
        
        .admin-form-button.secondary {
            background: linear-gradient(135deg, #6B7280 0%, #4B5563 100%);
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border-left-color: #5D5CDE;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            background: #fee2e2;
            border: 1px solid #fca5a5;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .dark .error-message {
            background: #7f1d1d;
            border-color: #b91c1c;
            color: #fca5a5;
        }
        
        .admin-product-card, .admin-category-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .dark .admin-product-card, .dark .admin-category-card {
            background-color: #2a2a2a;
        }
        
        .admin-product-card:hover, .admin-category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .image-upload-container {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .image-upload-container:hover {
            border-color: #5D5CDE;
            background-color: #f8f9ff;
        }
        
        .image-preview {
            max-width: 150px;
            max-height: 150px;
            border-radius: 8px;
            margin: 10px;
        }
        
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        @media (max-width: 768px) {
            .admin-nav-tabs {
                flex-direction: column;
            }
            
            .admin-nav-item {
                min-width: 100%;
            }
        }
    </style>
</head>

<body class="font-sans bg-light-200 dark:bg-dark-400 text-gray-800 dark:text-gray-200">
    <!-- Área Principal do Site -->
    <div id="main-site">
        <!-- Header -->
        <header class="bg-white dark:bg-dark-300 shadow-md py-4">
            <div class="container mx-auto px-4">
                <div class="flex items-center justify-between">
                    <a href="#" class="flex items-center space-x-3 group no-underline">
                        <!-- Container da logo -->
                        <div class="flex items-center space-x-3">
                            <div class="w-[50px] h-[50px] sm:w-[60px] sm:h-[60px] md:w-[70px] md:h-[70px] overflow-hidden rounded-full transition-all duration-300 group-hover:scale-105 shadow-lg">
                                <img src="https://pfst.cf2.poecdn.net/base/image/d1f85532876f53ac1e8b5772d3928c91b46d0255ed1d3a5dfa568c3ee0207bdc?w=1024&h=1024" 
                                     alt="Logo Suplementos BAHIA"
                                     class="w-full h-full object-cover"
                                     width="70"
                                     height="70">
                            </div>
                            <div class="block">
                                <h1 class="text-sm sm:text-lg md:text-xl font-bold text-black dark:text-white tracking-wide">SUPLEMENTOS</h1>
                                <h2 class="text-base sm:text-xl md:text-2xl font-black text-black dark:text-white tracking-wider -mt-1">BAHIA</h2>
                            </div>
                        </div>
                    </a>
                    
                    <!-- Breadcrumbs (visível apenas em páginas internas) -->
                    <nav aria-label="Breadcrumb" class="hidden breadcrumb-nav max-w-xs overflow-hidden">
                        <ol class="flex flex-nowrap text-sm text-gray-600 dark:text-gray-400">
                            <li class="breadcrumb-item flex items-center truncate">
                                <a href="#" class="hover:text-primary truncate">Home</a>
                            </li>
                            <li class="breadcrumb-item flex items-center truncate current-breadcrumb">
                                <span class="truncate">Produtos</span>
                            </li>
                        </ol>
                    </nav>
                    
                    <!-- Menu de navegação (desktop) -->
                    <nav class="hidden md:flex space-x-8">
                        <a href="#" class="font-medium hover:text-primary transition-colors">Home</a>
                        <a href="#produtos" class="font-medium hover:text-primary transition-colors">Produtos</a>
                        <a href="#guia" class="font-medium hover:text-primary transition-colors">Guia Nutricional</a>
                        <a href="#faq" class="font-medium hover:text-primary transition-colors">FAQ</a>
                        <a href="#local" class="font-medium hover:text-primary transition-colors">Nossa Loja</a>
                        <a href="#" id="admin-link" class="font-medium hover:text-primary transition-colors">Admin</a>
                    </nav>
                    
                    <!-- Ações do header -->
                    <div class="flex items-center space-x-4">
                        <!-- Busca -->
                        <button id="search-toggle" class="text-gray-600 dark:text-gray-300 hover:text-primary transition-colors" aria-label="Abrir busca">
                            <i class="fas fa-search"></i>
                        </button>
                        
                        <!-- Toggle dark mode -->
                        <button id="theme-toggle" class="text-gray-600 dark:text-gray-300 hover:text-primary transition-colors" aria-label="Alternar tema claro/escuro">
                            <i class="fas fa-moon dark:fas fa-sun"></i>
                        </button>
                        
                        <!-- Carrinho -->
                        <button id="cart-toggle" class="text-gray-600 dark:text-gray-300 hover:text-primary transition-colors relative" aria-label="Abrir carrinho">
                            <i class="fas fa-shopping-cart"></i>
                            <span id="cart-count" class="absolute -top-2 -right-2 bg-primary text-white text-xs rounded-full w-5 h-5 flex items-center justify-center transition-all">0</span>
                        </button>
                        
                        <!-- Menu mobile toggle -->
                        <button id="mobile-toggle" class="md:hidden text-gray-600 dark:text-gray-300 hover:text-primary" aria-label="Abrir menu">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Menu mobile (colapsado por padrão) -->
                <nav id="mobile-menu" class="md:hidden hidden pt-4 pb-2">
                    <div class="flex flex-col space-y-3">
                        <a href="#" class="font-medium hover:text-primary py-1">Home</a>
                        <a href="#produtos" class="font-medium hover:text-primary py-1">Produtos</a>
                        <a href="#guia" class="font-medium hover:text-primary py-1">Guia Nutricional</a>
                        <a href="#faq" class="font-medium hover:text-primary py-1">FAQ</a>
                        <a href="#local" class="font-medium hover:text-primary py-1">Nossa Loja</a>
                        <a href="#" id="admin-link-mobile" class="font-medium hover:text-primary py-1">Admin</a>
                    </div>
                </nav>
            </div>
        </header>
        
        <!-- Busca -->
        <div id="search-container" class="hidden bg-white dark:bg-dark-300 shadow-md py-4 absolute w-full z-40">
            <div class="container mx-auto px-4">
                <div class="relative max-w-2xl mx-auto">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input id="search-input" type="text" placeholder="Buscar produtos..." class="w-full pl-10 pr-10 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-full focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-dark-200" aria-label="Buscar produtos">
                    <button id="search-close" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200" aria-label="Fechar busca">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="search-results" class="mt-4 max-w-2xl mx-auto"></div>
            </div>
        </div>

        <!-- Hero Banner - Altura reduzida para mobile -->
        <section class="relative h-[250px] md:h-[400px] overflow-hidden">
            <div id="hero-gallery">
                <!-- Banners para Desktop -->
                <div class="hero-slide hero-desktop active" style="background-image: url('https://pfst.cf2.poecdn.net/base/image/31f8533b1af5fddb3c4175b98977324f0daf755cd0aa61474a1c3d9cdadd4894?w=1600&h=500')"></div>
                <div class="hero-slide hero-desktop" style="background-image: url('https://pfst.cf2.poecdn.net/base/image/c5c13de287bad78527b00af41e09529d0a228a4dea7282f9b0097e085be650db?w=1600&h=500')"></div>
                
                <!-- Banner para Mobile - Usando a nova imagem banner-br -->
                <div class="hero-slide hero-mobile active" style="background-image: url('https://pfst.cf2.poecdn.net/base/image/b585629e710d2091e1032fcb619bb055e4fa48c773e79caa952950ad3bee250a?w=1080&h=720')"></div>
                <div class="hero-slide hero-mobile active" style="background-image: url('images/bahia-mobile.jpg')"></div>
            </div>

            
            <div class="absolute inset-0 bg-black bg-opacity-50 flex flex-col justify-center items-center text-center px-4">
                 <!-- Indicadores de slide -->
                <div id="hero-controls" class="absolute bottom-6 flex space-x-3"></div>
            </div>
        </section>

        <!-- Produtos -->
        <section id="produtos" class="py-16 md:py-20">
            <div class="container mx-auto px-4">
                <h2 class="text-2xl md:text-3xl font-bold text-center font-heading mb-10 relative">
                    Nossos Produtos
                    <span class="block w-20 h-1 bg-primary mx-auto mt-3"></span>
                </h2>
                
                <!-- Filtros de categoria -->
                <div class="mb-8">
                    <div id="category-filters" class="flex md:justify-center gap-3 mb-6 overflow-x-auto categories-scroll pb-2">
                        <button data-filter="todos" class="filter-btn bg-primary text-white hover:bg-primary hover:bg-opacity-90 px-6 py-2.5 rounded-full text-sm font-medium transition active">Todos</button>
                        <!-- Categorias dinâmicas serão inseridas aqui -->
                    </div>
                </div>
                
                <!-- Grid de produtos -->
                <div id="products-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 md:gap-7"></div>
                
                <!-- Paginação / Load More -->
                <div class="mt-12 flex justify-center">
                    <button id="load-more" class="bg-white dark:bg-dark-200 hover:bg-gray-100 dark:hover:bg-dark-100 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium py-2.5 px-7 rounded-full transition-colors hidden">
                        Carregar mais produtos
                        <i class="fas fa-chevron-down ml-2"></i>
                    </button>
                    
                    <div id="pagination" class="flex space-x-2"></div>
                </div>
            </div>
        </section>

        <!-- Guia Nutricional -->
        <section id="guia" class="py-16 md:py-20 bg-gray-50 dark:bg-dark-300">
            <div class="container mx-auto px-4">
                <h2 class="text-2xl md:text-3xl font-bold text-center font-heading mb-10 relative">
                    Guia Nutricional
                    <span class="block w-20 h-1 bg-primary mx-auto mt-3"></span>
                </h2>
                
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark mb-5 overflow-hidden">
                        <div class="accordion-header cursor-pointer p-5 bg-gray-100 dark:bg-dark-100 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="accordion-1">
                            <h3 class="text-lg">Proteínas e Aminoácidos</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="accordion-1" class="accordion-content hidden p-5">
                            <p class="mb-4">As proteínas são macronutrientes essenciais para a construção e recuperação muscular. Os aminoácidos são os blocos construtores das proteínas.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Whey Protein:</strong> Rápida absorção, ideal para pós-treino</li>
                                <li><strong>BCAA:</strong> Aminoácidos que estimulam a síntese proteica</li>
                                <li><strong>Glutamina:</strong> Essencial para recuperação muscular</li>
                                <li><strong>Albumina:</strong> Proteína extraída da clara do ovo</li>
                                <li><strong>Caseína:</strong> Proteína de digestão lenta, ideal antes de dormir</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark mb-5 overflow-hidden">
                        <div class="accordion-header cursor-pointer p-5 bg-gray-100 dark:bg-dark-100 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="accordion-2">
                            <h3 class="text-lg">Energia e Performance</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="accordion-2" class="accordion-content hidden p-5">
                            <p class="mb-4">Suplementos que melhoram a capacidade energética e performance durante o exercício.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Creatina:</strong> Aumenta força, potência e massa muscular</li>
                                <li><strong>Pré-Treino:</strong> Combinação de ingredientes para energia e foco</li>
                                <li><strong>Termogênicos:</strong> Aceleram o metabolismo</li>
                                <li><strong>Beta-Alanina:</strong> Reduz fadiga muscular</li>
                                <li><strong>Cafeína:</strong> Melhora concentração e reduz percepção de esforço</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark overflow-hidden">
                        <div class="accordion-header cursor-pointer p-5 bg-gray-100 dark:bg-dark-100 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="accordion-3">
                            <h3 class="text-lg">Saúde e Bem-Estar</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="accordion-3" class="accordion-content hidden p-5">
                            <p class="mb-4">Suplementos que auxiliam na manutenção da saúde geral do corpo.</p>
                            <ul class="list-disc pl-5 space-y-2">
                                <li><strong>Multivitamínicos:</strong> Combinação de vitaminas e minerais essenciais</li>
                                <li><strong>Ômega 3:</strong> Ácidos graxos com efeitos anti-inflamatórios</li>
                                <li><strong>Colágeno:</strong> Beneficia pele, cabelos, unhas e articulações</li>
                                <li><strong>Vitamina D:</strong> Essencial para imunidade e saúde óssea</li>
                                <li><strong>Magnésio:</strong> Crucial para produção de energia e função muscular</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section id="faq" class="py-16 md:py-20">
            <div class="container mx-auto px-4">
                <h2 class="text-2xl md:text-3xl font-bold text-center font-heading mb-10 relative">
                    Perguntas Frequentes
                    <span class="block w-20 h-1 bg-primary mx-auto mt-3"></span>
                </h2>
                
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark mb-5 overflow-hidden">
                        <div class="faq-header cursor-pointer p-5 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="faq-1">
                            <h3 class="text-lg">Como escolher o suplemento ideal para meus objetivos?</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="faq-1" class="faq-content hidden p-5 border-t border-gray-200 dark:border-gray-600">
                            <p>A escolha do suplemento ideal depende diretamente dos seus objetivos:</p>
                            <ul class="list-disc pl-5 mt-3">
                                <li><strong>Para ganho de massa muscular:</strong> Whey protein, creatina, hipercalóricos</li>
                                <li><strong>Para perda de gordura:</strong> Termogênicos, proteínas, L-carnitina</li>
                                <li><strong>Para performance:</strong> Creatina, beta-alanina, cafeína</li>
                                <li><strong>Para saúde geral:</strong> Multivitamínicos, ômega-3, vitamina D</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark mb-5 overflow-hidden">
                        <div class="faq-header cursor-pointer p-5 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="faq-2">
                            <h3 class="text-lg">Qual é o melhor horário para tomar proteína?</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="faq-2" class="faq-content hidden p-5 border-t border-gray-200 dark:border-gray-600">
                            <p>O horário ideal para consumo de proteína varia conforme o tipo e seu objetivo:</p>
                            <ul class="list-disc pl-5 mt-3">
                                <li><strong>Whey Protein:</strong> Ideal logo após o treino devido à rápida absorção</li>
                                <li><strong>Caseína:</strong> Melhor consumida antes de dormir por ter digestão lenta</li>
                                <li><strong>Proteínas vegetais:</strong> Podem ser consumidas em qualquer horário</li>
                            </ul>
                            <p class="mt-3">O mais importante é garantir um consumo adequado de proteínas ao longo do dia.</p>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark overflow-hidden">
                        <div class="faq-header cursor-pointer p-5 font-medium flex justify-between items-center" role="button" aria-expanded="false" aria-controls="faq-3">
                            <h3 class="text-lg">Qual a diferença entre Whey Concentrado, Isolado e Hidrolisado?</h3>
                            <i class="fas fa-chevron-down transition-transform"></i>
                        </div>
                        <div id="faq-3" class="faq-content hidden p-5 border-t border-gray-200 dark:border-gray-600">
                            <p>A principal diferença está no processo de fabricação e no teor de proteínas:</p>
                            <ul class="list-disc pl-5 mt-3">
                                <li><strong>Whey Concentrado:</strong> 70-80% de proteína, com pequenas quantidades de lactose e gordura. Opção mais econômica.</li>
                                <li><strong>Whey Isolado:</strong> 90-95% de proteína, quantidades mínimas de lactose e gordura. Ideal para sensíveis à lactose.</li>
                                <li><strong>Whey Hidrolisado:</strong> Proteínas quebradas em peptídeos menores, absorção mais rápida. Opção mais cara.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Localização da Loja -->
        <section id="local" class="py-16 md:py-20 bg-gray-50 dark:bg-dark-300">
            <div class="container mx-auto px-4">
                <h2 class="text-2xl md:text-3xl font-bold text-center font-heading mb-10 relative">
                    Nossa Loja
                    <span class="block w-20 h-1 bg-primary mx-auto mt-3"></span>
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div class="flex flex-col justify-center">
                        <h3 class="text-xl font-medium mb-5">Encontre-nos em Carinhanha</h3>
                        <p class="mb-6">Visite nossa loja física e conheça todo o nosso catálogo de produtos. Nossa equipe está pronta para te auxiliar a encontrar os suplementos ideais para seus objetivos.</p>
                        
                        <div class="space-y-4 mb-6">
                            <div class="flex items-start">
                                <i class="fas fa-map-marker-alt text-primary mt-1 mr-3 text-lg"></i>
                                <span>Avenida São José, Centro, Carinhanha - Bahia</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-phone text-primary mt-1 mr-3 text-lg"></i>
                                <span>(77) 99915-2558</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-clock text-primary mt-1 mr-3 text-lg"></i>
                                <span>Segunda a Sexta: 8h às 18h<br>Sábado: 8h às 12h</span>
                            </div>
                        </div>
                        
                        <a href="https://maps.google.com/?q=Avenida São José, Centro, Carinhanha, BA" target="_blank" rel="noopener" class="inline-flex items-center text-primary hover:underline text-lg">
                            <i class="fas fa-directions mr-2"></i>
                            Como chegar
                        </a>
                    </div>
                    
                    <div class="map-container rounded-xl overflow-hidden shadow-card dark:shadow-card-dark">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15490.527985759187!2d-43.7732847!3d-14.3053!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x75bb041f6d7f0123%3A0x123456789abcdef!2sAvenida%20São%20José%2C%20Centro%2C%20Carinhanha%20-%20BA!5e0!3m2!1spt-BR!2sbr!4v1695306789012!5m2!1spt-BR!2sbr" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Mapa da loja Suplementos BAHIA em Carinhanha"></iframe>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white dark:bg-dark-300">
            <div class="container mx-auto px-4">
                <!-- Centraliza no mobile -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-left">
                    <div class="flex flex-col items-center md:items-start">
                        <div class="flex flex-col items-center md:flex-row md:items-center md:space-x-3 mb-5">
                            <!-- Logo da Suplementos BAHIA -->
                            <div class="w-[60px] h-[60px] overflow-hidden transition-all duration-300 rounded-full mb-3 md:mb-0">
                                <img src="https://pfst.cf2.poecdn.net/base/image/d1f85532876f53ac1e8b5772d3928c91b46d0255ed1d3a5dfa568c3ee0207bdc?w=1024&h=1024" 
                                     alt="Logo Suplementos BAHIA"
                                     class="w-full h-full object-cover"
                                     width="60"  
                                     height="60">
                            </div>
                            <div>
                                <div class="text-lg font-bold text-white dark:text-white tracking-wide">SUPLEMENTOS</div>
                                <div class="text-xl font-black text-white dark:text-white tracking-wider -mt-1">BAHIA</div>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-5 max-w-sm md:max-w-none">Suplementos alimentares de alta qualidade para potencializar seus resultados.</p>
                        <div class="flex justify-center md:justify-start space-x-4">
                            <a href="#" class="text-gray-300 hover:text-white transition-colors text-lg" aria-label="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="text-gray-300 hover:text-white transition-colors text-lg" aria-label="Instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="https://wa.me/5577999152558" class="text-gray-300 hover:text-white transition-colors text-lg" aria-label="WhatsApp">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-medium mb-4">Navegação</h4>
                        <ul class="space-y-2.5">
                            <li><a href="#" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                            <li><a href="#produtos" class="text-gray-300 hover:text-white transition-colors">Produtos</a></li>
                            <li><a href="#guia" class="text-gray-300 hover:text-white transition-colors">Guia Nutricional</a></li>
                            <li><a href="#faq" class="text-gray-300 hover:text-white transition-colors">FAQ</a></li>
                            <li><a href="#local" class="text-gray-300 hover:text-white transition-colors">Nossa Loja</a></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-medium mb-4">Categorias</h4>
                        <ul class="space-y-2.5" id="footer-categories">
                            <!-- Categorias dinâmicas serão inseridas aqui -->
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-medium mb-4">Contato</h4>
                        <ul class="space-y-2.5">
                            <li class="flex justify-center md:justify-start items-center">
                                <i class="fas fa-phone text-primary mr-2.5"></i>
                                <span>(77) 99915-2558</span>
                            </li>
                            <li class="flex justify-center md:justify-start items-center">
                                <i class="fas fa-envelope text-primary mr-2.5"></i>
                                <span>contato@suplementosbahia.com.br</span>
                            </li>
                            <li class="flex justify-center md:justify-start items-center">
                                <i class="fas fa-map-marker-alt text-primary mr-2.5"></i>
                                <span>Avenida São José, Centro, Carinhanha - BA</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <div class="border-t border-gray-700 mt-10 pt-6 text-center text-gray-400">
                    <div class="footer-bottom">
                        <div class="footer-bottom-content">
                            <p>&copy; 2025 Suplementos BAHIA. Todos os direitos reservados.</p>
                            <p class="developer-credit mt-1">
                                <i class="fas fa-code"></i> Desenvolvido por 
                                <a href="https://wa.me/5575991342279" target="_blank" class="developer-link text-orange-500 hover:underline">
                                    PeagahTech
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Área Administrativa -->
    <div id="admin-panel" class="admin-panel">
        <div class="min-h-screen bg-gray-100 dark:bg-gray-900">
            <!-- Header Admin -->
            <header class="bg-white dark:bg-gray-800 shadow-md admin-header">
                <div class="container mx-auto px-4 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 overflow-hidden rounded-full">
                                <img src="https://pfst.cf2.poecdn.net/base/image/d1f85532876f53ac1e8b5772d3928c91b46d0255ed1d3a5dfa568c3ee0207bdc?w=1024&h=1024" 
                                     alt="Logo Suplementos BAHIA"
                                     class="w-full h-full object-cover"
                                     width="48"
                                     height="48">
                            </div>
                            <div>
                                <h1 class="text-xl font-bold">Área Administrativa</h1>
                                <p class="text-sm text-gray-500">Suplementos BAHIA</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <button id="admin-theme-toggle" class="text-gray-600 dark:text-gray-300 hover:text-primary transition-colors">
                                <i class="fas fa-moon dark:fas fa-sun"></i>
                            </button>
                            <button id="back-to-site" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition">
                                <i class="fas fa-arrow-left mr-2"></i> Voltar ao Site
                            </button>
                            <button id="admin-logout" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition">
                                <i class="fas fa-sign-out-alt mr-2"></i> Sair
                            </button>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Login Admin -->
            <div id="admin-login" class="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900">
                <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-md">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-lock text-white text-2xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold">Área Restrita</h2>
                        <p class="text-gray-600 dark:text-gray-400">Faça login para acessar o painel</p>
                    </div>
                    
                    <div id="admin-login-error" class="error-message hidden">
                        Usuário ou senha incorretos
                    </div>
                    
                    <form id="admin-login-form">
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2">Usuário</label>
                            <input type="text" id="admin-username" class="admin-form-input" required>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium mb-2">Senha</label>
                            <input type="password" id="admin-password" class="admin-form-input" required>
                        </div>
                        <button type="submit" class="admin-form-button w-full">
                            <i class="fas fa-sign-in-alt mr-2"></i> Entrar
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Dashboard Admin -->
            <div id="admin-dashboard" class="hidden p-6">
                <!-- Navegação Admin -->
                <div class="admin-nav mb-8">
                    <ul class="admin-nav-tabs">
                        <li class="admin-nav-item active" data-tab="dashboard">
                            <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                        </li>
                        <li class="admin-nav-item" data-tab="products">
                            <i class="fas fa-box mr-2"></i> Produtos
                        </li>
                        <li class="admin-nav-item" data-tab="categories">
                            <i class="fas fa-tags mr-2"></i> Categorias
                        </li>
                        <li class="admin-nav-item" data-tab="orders">
                            <i class="fas fa-shopping-bag mr-2"></i> Pedidos
                        </li>
                        <li class="admin-nav-item" data-tab="settings">
                            <i class="fas fa-cog mr-2"></i> Configurações
                        </li>
                    </ul>
                </div>
                
                <!-- Tab Dashboard -->
                <div id="admin-tab-dashboard" class="admin-tab">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Vendas Hoje</p>
                                    <p class="text-2xl font-bold text-primary" id="sales-today">R$ 0,00</p>
                                </div>
                                <div class="text-3xl text-primary">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Vendas Mês</p>
                                    <p class="text-2xl font-bold text-green-600" id="sales-month">R$ 0,00</p>
                                </div>
                                <div class="text-3xl text-green-600">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Pedidos Pendentes</p>
                                    <p class="text-2xl font-bold text-orange-600" id="pending-orders">0</p>
                                </div>
                                <div class="text-3xl text-orange-600">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Total Produtos</p>
                                    <p class="text-2xl font-bold text-blue-600" id="total-products">0</p>
                                </div>
                                <div class="text-3xl text-blue-600">
                                    <i class="fas fa-box"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold mb-4">Últimos Pedidos</h3>
                            <div id="recent-orders">
                                <div class="text-center py-8 text-gray-500">
                                    <i class="fas fa-shopping-bag text-3xl mb-2"></i>
                                    <p>Nenhum pedido encontrado</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold mb-4">Produtos Mais Vendidos</h3>
                            <div id="top-products">
                                <div class="text-center py-8 text-gray-500">
                                    <i class="fas fa-chart-bar text-3xl mb-2"></i>
                                    <p>Sem dados de vendas</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Produtos -->
                <div id="admin-tab-products" class="admin-tab hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Gerenciar Produtos</h2>
                        <button id="add-product-btn" class="admin-form-button">
                            <i class="fas fa-plus mr-2"></i> Adicionar Produto
                        </button>
                    </div>
                    
                    <!-- Formulário de Produto -->
                    <div id="product-form-container" class="admin-form-container hidden">
                        <h3 id="product-form-title" class="text-xl font-bold mb-6">Adicionar Produto</h3>
                        <div id="product-form-error" class="error-message hidden"></div>
                        
                        <form id="product-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Nome do Produto *</label>
                                <input type="text" id="product-name" class="admin-form-input" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Categoria *</label>
                                <select id="product-category" class="admin-form-select" required>
                                    <option value="">Selecione uma categoria</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Preço (R$) *</label>
                                <input type="number" id="product-price" class="admin-form-input" step="0.01" min="0" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Preço Antigo (R$)</label>
                                <input type="number" id="product-old-price" class="admin-form-input" step="0.01" min="0">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Peso/Gramas</label>
                                <input type="text" id="product-weight" class="admin-form-input">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Marca</label>
                                <input type="text" id="product-brand" class="admin-form-input">
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Sabores (separados por vírgula)</label>
                                <input type="text" id="product-flavors" class="admin-form-input">
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Benefícios</label>
                                <textarea id="product-benefits" class="admin-form-textarea" rows="3"></textarea>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Ingredientes</label>
                                <input type="text" id="product-ingredients" class="admin-form-input">
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Modo de Uso</label>
                                <textarea id="product-usage" class="admin-form-textarea" rows="2"></textarea>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Descrição</label>
                                <textarea id="product-description" class="admin-form-textarea" rows="4"></textarea>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Imagem do Produto</label>
                                <div class="image-upload-container" id="product-image-upload">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                    <p class="text-gray-600 dark:text-gray-400">Clique para fazer upload da imagem</p>
                                    <input type="file" id="product-image-input" class="hidden" accept="image/*">
                                </div>
                                <div id="product-image-preview" class="mt-4"></div>
                            </div>
                            
                            <div class="md:col-span-2 flex justify-end space-x-4">
                                <button type="button" id="cancel-product-btn" class="admin-form-button secondary">
                                    Cancelar
                                </button>
                                <button type="submit" class="admin-form-button">
                                    <i class="fas fa-save mr-2"></i> Salvar
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Lista de Produtos -->
                    <div id="admin-products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="flex justify-center items-center py-12 col-span-full">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Categorias -->
                <div id="admin-tab-categories" class="admin-tab hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Gerenciar Categorias</h2>
                        <button id="add-category-btn" class="admin-form-button">
                            <i class="fas fa-plus mr-2"></i> Adicionar Categoria
                        </button>
                    </div>
                    
                    <!-- Formulário de Categoria -->
                    <div id="category-form-container" class="admin-form-container hidden">
                        <h3 id="category-form-title" class="text-xl font-bold mb-6">Adicionar Categoria</h3>
                        <div id="category-form-error" class="error-message hidden"></div>
                        
                        <form id="category-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Nome da Categoria *</label>
                                <input type="text" id="category-name" class="admin-form-input" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Código da Categoria *</label>
                                <input type="text" id="category-code" class="admin-form-input" required>
                                <small class="text-gray-500">Apenas letras minúsculas, números e hífens</small>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Descrição *</label>
                                <textarea id="category-description" class="admin-form-textarea" rows="3" required></textarea>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Imagem da Categoria</label>
                                <div class="image-upload-container" id="category-image-upload">
                                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                    <p class="text-gray-600 dark:text-gray-400">Clique para fazer upload da imagem</p>
                                    <input type="file" id="category-image-input" class="hidden" accept="image/*">
                                </div>
                                <div id="category-image-preview" class="mt-4"></div>
                            </div>
                            
                            <div class="md:col-span-2 flex justify-end space-x-4">
                                <button type="button" id="cancel-category-btn" class="admin-form-button secondary">
                                    Cancelar
                                </button>
                                <button type="submit" class="admin-form-button">
                                    <i class="fas fa-save mr-2"></i> Salvar
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Lista de Categorias -->
                    <div id="admin-categories-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="flex justify-center items-center py-12 col-span-full">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Pedidos -->
                <div id="admin-tab-orders" class="admin-tab hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold">Gerenciar Pedidos</h2>
                        <div class="flex gap-4">
                            <select id="order-status-filter" class="admin-form-select">
                                <option value="all">Todos os Status</option>
                                <option value="pending">Pendente</option>
                                <option value="delivered">Entregue</option>
                                <option value="cancelled">Cancelado</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="orders-list" class="space-y-4">
                        <div class="flex justify-center items-center py-12">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Configurações -->
                <div id="admin-tab-settings" class="admin-tab hidden">
                    <h2 class="text-2xl font-bold mb-6">Configurações da Loja</h2>
                    
                    <!-- Configurações de Frete -->
                    <div class="admin-form-container">
                        <h3 class="text-lg font-bold mb-4">Configurações de Frete</h3>
                        <div id="settings-form-error" class="error-message hidden"></div>
                        
                        <form id="settings-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Valor do Frete (R$) *</label>
                                <input type="number" id="shipping-price" class="admin-form-input" step="0.01" min="0" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Frete Grátis a partir de (R$)</label>
                                <input type="number" id="free-shipping-limit" class="admin-form-input" step="0.01" min="0">
                                <small class="text-gray-500">Deixe 0 para desabilitar</small>
                            </div>
                            
                            <div class="md:col-span-2 flex justify-end">
                                <button type="submit" class="admin-form-button">
                                    <i class="fas fa-save mr-2"></i> Salvar Configurações
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Configurações de Login -->
                    <div class="admin-form-container mt-8">
                        <h3 class="text-lg font-bold mb-4">Alterar Credenciais de Admin</h3>
                        <div id="credentials-form-error" class="error-message hidden"></div>
                        
                        <form id="credentials-form" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium mb-2">Novo Usuário *</label>
                                <input type="text" id="new-admin-username" class="admin-form-input" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-2">Nova Senha *</label>
                                <input type="password" id="new-admin-password" class="admin-form-input" required>
                            </div>
                            
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium mb-2">Confirmar Nova Senha *</label>
                                <input type="password" id="confirm-admin-password" class="admin-form-input" required>
                            </div>
                            
                            <div class="md:col-span-2 flex justify-end">
                                <button type="submit" class="admin-form-button">
                                    <i class="fas fa-key mr-2"></i> Alterar Credenciais
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Carrinho de compras -->
    <div id="cart-panel" class="fixed inset-y-0 right-0 w-full md:w-96 bg-white dark:bg-dark-200 shadow-lg transform translate-x-full transition-transform z-50">
        <div class="flex flex-col h-full">
            <div class="p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h2 class="text-lg font-medium">Seu Carrinho (<span id="cart-items-count">0</span>)</h2>
                <button id="close-cart" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" aria-label="Fechar carrinho">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="cart-items" class="flex-grow overflow-auto p-5">
                <div id="empty-cart" class="flex flex-col items-center justify-center h-full text-gray-500 dark:text-gray-400">
                    <i class="fas fa-shopping-cart text-4xl mb-4"></i>
                    <p class="mb-4">Seu carrinho está vazio</p>
                    <a href="#produtos" class="text-primary hover:underline">Comprar agora</a>
                </div>
            </div>
            
            <div class="p-5 border-t border-gray-200 dark:border-gray-700">
                <div class="flex justify-between mb-4">
                    <span>Subtotal:</span>
                    <span id="cart-subtotal" class="font-medium">R$0,00</span>
                </div>
                <button id="finalizar-pedido" class="w-full bg-primary hover:bg-opacity-90 text-white py-3 rounded-full transition-all hover:shadow-lg transform hover:-translate-y-1">
                    Finalizar Pedido
                </button>
            </div>
        </div>
    </div>

    <!-- Quick View Modal -->
    <div id="quickview-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden quick-view-modal">
        <div class="bg-white dark:bg-dark-200 rounded-xl shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-auto">
            <div class="flex justify-between items-center p-5 border-b border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-medium" id="quickview-title">Detalhes do Produto</h3>
                <button id="close-quickview" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" aria-label="Fechar detalhes">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="p-5" id="quickview-content">
                <div class="animate-pulse">
                    <div class="h-64 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"></div>
                    <div class="h-6 bg-gray-200 dark:bg-gray-700 rounded-lg w-3/4 mb-2"></div>
                    <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-lg w-1/2 mb-4"></div>
                    <div class="h-32 bg-gray-200 dark:bg-gray-700 rounded-lg mb-4"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="order-details-modal" class="fixed inset-0 z-50 hidden modal-backdrop">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl">
                <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700" id="close-order-modal">
                    <i class="fas fa-times"></i>
                </button>
                
                <div class="p-6">
                    <h3 class="text-xl font-bold mb-4">Detalhes do Pedido</h3>
                    <div id="order-details-content"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmação Customizado -->
    <div id="confirm-modal" class="fixed inset-0 z-50 hidden">
        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full">
                <div class="p-6">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center mr-3">
                            <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400"></i>
                        </div>
                        <h3 class="text-lg font-semibold">Confirmar Ação</h3>
                    </div>
                    <p id="confirm-message" class="text-gray-600 dark:text-gray-300 mb-6">Tem certeza que deseja continuar?</p>
                    <div class="flex justify-end space-x-3">
                        <button id="confirm-cancel" class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition">
                            Cancelar
                        </button>
                        <button id="confirm-ok" class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded transition">
                            Confirmar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay para fechar menus -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

    <!-- Botão voltar ao topo -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all z-30" aria-label="Voltar ao topo">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Botão do WhatsApp -->
    <a href="https://wa.me/5577999152558" target="_blank" class="whatsapp-button" aria-label="Contato pelo WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Toast notifications container (mantido, mas não será usado) -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50"></div>

    <!-- Alert Message -->
    <div id="alert-message" class="fixed bottom-4 right-4 max-w-md bg-green-500 text-white p-4 rounded-lg shadow-lg transform translate-y-full opacity-0 transition-all duration-300 z-50 flex items-center">
        <i class="fas fa-check-circle mr-3 text-xl"></i>
        <span id="alert-text">Operação realizada com sucesso!</span>
    </div>

    <script>
        // *** Configuração do Supabase ***
        let supabase = null;
        let productsDB = [];
        let categoryData = {};
        let isAdminLoggedIn = false;
        let currentAdminTab = 'dashboard';
        let currentEditingId = null;
        let ordersDB = [];
        let shippingConfig = { price: 10.00, freeShippingLimit: 150.00 };
        let adminCredentials = { username: 'admin', password: 'admin123' }; // Credenciais padrão

        // Inicializar Supabase
        function initSupabase() {
            try {
                const supabaseUrl = 'https://objhnypjkrocgixsyejf.supabase.co';
                const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9iamhueXBqa3JvY2dpeHN5ZWpmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NzU2MDIsImV4cCI6MjA2NjM1MTYwMn0.tOg52_qdTVwy5N09abTBxmKmFb4h0yJaSutPxKflZKY';
                
                supabase = window.supabase.createClient(supabaseUrl, supabaseKey);
                console.log('✅ Supabase inicializado com sucesso!');
                return true;
            } catch (error) {
                console.error('❌ Erro ao inicializar Supabase:', error);
                return false;
            }
        }

        // Função de confirmação customizada
        function showConfirmDialog(message, onConfirm) {
            const modal = document.getElementById('confirm-modal');
            const messageEl = document.getElementById('confirm-message');
            const cancelBtn = document.getElementById('confirm-cancel');
            const okBtn = document.getElementById('confirm-ok');
            
            messageEl.textContent = message;
            modal.classList.remove('hidden');
            
            // Remover listeners antigos
            const newCancelBtn = cancelBtn.cloneNode(true);
            const newOkBtn = okBtn.cloneNode(true);
            cancelBtn.parentNode.replaceChild(newCancelBtn, cancelBtn);
            okBtn.parentNode.replaceChild(newOkBtn, okBtn);
            
            // Adicionar novos listeners
            newCancelBtn.addEventListener('click', () => {
                modal.classList.add('hidden');
            });
            
            newOkBtn.addEventListener('click', () => {
                modal.classList.add('hidden');
                onConfirm();
            });
        }

        // Upload de imagem para Supabase Storage
        async function uploadImage(file, folder = 'products') {
            if (!supabase) {
                console.log('⚠️ Supabase não configurado.');
                return `https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=400&fit=crop`;
            }

            try {
                const fileExt = file.name.split('.').pop();
                const fileName = `${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`;
                const filePath = `${folder}/${fileName}`;

                const { data, error } = await supabase.storage
                    .from('sb_images')
                    .upload(filePath, file);

                if (error) throw error;

                const { data: urlData } = supabase.storage
                    .from('sb_images')
                    .getPublicUrl(filePath);

                return urlData.publicUrl;
            } catch (error) {
                console.error('Erro no upload:', error);
                return `https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=400&fit=crop`;
            }
        }

        // Carregar dados do Supabase
        async function loadAdminData() {
            if (!supabase) {
                console.log('🔄 Supabase não configurado, carregando dados demo...');
                loadDemoData();
                return;
            }

            try {
                // Carregar categorias
                const { data: categories } = await supabase
                    .from('sb_categories')
                    .select('*');

                if (categories) {
                    categoryData = {};
                    categories.forEach(cat => {
                        categoryData[cat.sb_code] = cat;
                    });
                    updateCategoryFilters();
                }

                // Carregar produtos
                const { data: products } = await supabase
                    .from('sb_products')
                    .select('*');

                if (products) {
                    productsDB = products.map(product => ({
                        ...product,
                        id: product.sb_product_id,
                        name: product.sb_name,
                        category: product.sb_category,
                        price: product.sb_price,
                        oldPrice: product.sb_old_price,
                        weight: product.sb_weight,
                        brand: product.sb_brand,
                        flavors: product.sb_flavors,
                        benefits: product.sb_benefits,
                        ingredients: product.sb_ingredients,
                        usage: product.sb_usage,
                        description: product.sb_description,
                        images: product.sb_images,
                        image: product.sb_image_url || (product.sb_images && product.sb_images[0]) || 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400',
                        rating: 4.5 // Rating padrão
                    }));
                    
                    if (currentAdminTab === 'products') loadAdminProducts();
                    // Recarregar produtos no site
                    loadProducts(0, 8);
                }

                // Carregar pedidos
                const { data: orders } = await supabase
                    .from('sb_orders')
                    .select('*')
                    .order('sb_created_at', { ascending: false });

                if (orders) {
                    ordersDB = orders.map(order => ({
                        ...order,
                        id: order.sb_order_id,
                        customer_name: order.sb_customer_name,
                        customer_phone: order.sb_customer_phone,
                        items: order.sb_items,
                        subtotal_amount: order.sb_subtotal_amount,
                        shipping_amount: order.sb_shipping_amount,
                        total_amount: order.sb_total_amount,
                        payment_method: order.sb_payment_method,
                        status: order.sb_status,
                        created_at: order.sb_created_at
                    }));
                    
                    if (currentAdminTab === 'orders') loadOrders();
                    if (currentAdminTab === 'dashboard') updateDashboard();
                }

                // Carregar configurações
                const { data: settings } = await supabase
                    .from('sb_settings')
                    .select('*')
                    .single();

                if (settings) {
                    shippingConfig = {
                        price: settings.sb_shipping_price || 10.00,
                        freeShippingLimit: settings.sb_free_shipping_limit || 150.00
                    };
                    
                    // Carregar credenciais do admin se existirem
                    if (settings.sb_admin_username && settings.sb_admin_password) {
                        adminCredentials = {
                            username: settings.sb_admin_username,
                            password: settings.sb_admin_password
                        };
                    }
                    
                    updateShippingDisplay();
                    updateCredentialsDisplay();
                }

            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                loadDemoData();
            }
        }

        // Carregar dados demo
        function loadDemoData() {
            categoryData = {
                'todos': {
                    sb_category_id: 0,
                    sb_code: 'todos',
                    sb_name: 'Todos',
                    sb_description: 'Todas as categorias',
                    sb_image_url: null
                }
            };

            productsDB = [];
            ordersDB = [];
            
            updateCategoryFilters();
            if (currentAdminTab === 'products') loadAdminProducts();
            if (currentAdminTab === 'orders') loadOrders();
            if (currentAdminTab === 'dashboard') updateDashboard();
            loadProducts(0, 8); // Carregar produtos no site
        }

        // Salvar produto
        async function saveProduct(productData) {
            if (!supabase) return { success: false, error: 'Supabase não inicializado' };

            try {
                if (!productData.sb_name || !productData.sb_category || productData.sb_price <= 0) {
                    return { success: false, error: 'Nome, categoria e preço são obrigatórios' };
                }

                if (currentEditingId) {
                    const { data, error } = await supabase
                        .from('sb_products')
                        .update(productData)
                        .eq('sb_product_id', currentEditingId)
                        .select();
                    if (error) throw error;
                } else {
                    const { data, error } = await supabase
                        .from('sb_products')
                        .insert([productData])
                        .select();
                    if (error) throw error;
                }

                await loadAdminData();
                return { success: true };
            } catch (error) {
                console.error('Erro ao salvar produto:', error);
                return { success: false, error: error.message };
            }
        }

        // Salvar categoria
        async function saveCategory(categoryData) {
            if (!supabase) return { success: false, error: 'Supabase não inicializado' };

            try {
                if (!categoryData.sb_code || !categoryData.sb_name || !categoryData.sb_description) {
                    return { success: false, error: 'Todos os campos obrigatórios devem ser preenchidos' };
                }

                categoryData.sb_code = categoryData.sb_code.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');

                if (currentEditingId) {
                    const { data, error } = await supabase
                        .from('sb_categories')
                        .update(categoryData)
                        .eq('sb_category_id', currentEditingId)
                        .select();
                    if (error) throw error;
                } else {
                    const { data, error } = await supabase
                        .from('sb_categories')
                        .insert([categoryData])
                        .select();
                    if (error) throw error;
                }

                await loadAdminData();
                return { success: true };
            } catch (error) {
                console.error('Erro ao salvar categoria:', error);
                return { success: false, error: error.message };
            }
        }

        // Atualizar status do pedido
        async function updateOrderStatus(orderId, status) {
            if (!supabase) return { success: false, error: 'Supabase não inicializado' };

            try {
                const { data, error } = await supabase
                    .from('sb_orders')
                    .update({ sb_status: status })
                    .eq('sb_order_id', orderId)
                    .select();

                if (error) throw error;
                await loadAdminData();
                return { success: true };
            } catch (error) {
                console.error('Erro ao atualizar status:', error);
                return { success: false, error: error.message };
            }
        }

        // Salvar configurações
        async function saveSettings(settingsData) {
            if (!supabase) {
                shippingConfig = {
                    price: settingsData.sb_shipping_price,
                    freeShippingLimit: settingsData.sb_free_shipping_limit
                };
                updateShippingDisplay();
                return { success: true };
            }

            try {
                const { data, error } = await supabase
                    .from('sb_settings')
                    .upsert([{ sb_settings_id: 1, ...settingsData }])
                    .select();

                if (error) throw error;
                
                shippingConfig = {
                    price: settingsData.sb_shipping_price,
                    freeShippingLimit: settingsData.sb_free_shipping_limit
                };
                
                // Atualizar credenciais se existirem
                if (settingsData.sb_admin_username && settingsData.sb_admin_password) {
                    adminCredentials = {
                        username: settingsData.sb_admin_username,
                        password: settingsData.sb_admin_password
                    };
                }
                
                updateShippingDisplay();
                updateCredentialsDisplay();
                return { success: true };
            } catch (error) {
                console.error('Erro ao salvar configurações:', error);
                return { success: false, error: error.message };
            }
        }

        // Excluir produto
        async function deleteProduct(id) {
            showConfirmDialog('Tem certeza que deseja excluir este produto?', async () => {
                try {
                    const { error } = await supabase
                        .from('sb_products')
                        .delete()
                        .eq('sb_product_id', id);

                    if (error) throw error;
                    await loadAdminData();
                    showAlert('Produto excluído com sucesso!');
                } catch (error) {
                    console.error('Erro ao excluir produto:', error);
                    showAlert('Erro ao excluir produto!', 'error');
                }
            });
        }

        // Excluir categoria
        async function deleteCategory(id) {
            showConfirmDialog('Tem certeza que deseja excluir esta categoria?', async () => {
                try {
                    const { error } = await supabase
                        .from('sb_categories')
                        .delete()
                        .eq('sb_category_id', id);

                    if (error) throw error;
                    await loadAdminData();
                    showAlert('Categoria excluída com sucesso!');
                } catch (error) {
                    console.error('Erro ao excluir categoria:', error);
                    showAlert('Erro ao excluir categoria!', 'error');
                }
            });
        }

        // Mostrar/esconder erro no formulário
        function showFormError(formType, message) {
            const errorDiv = document.getElementById(`${formType}-form-error`);
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
        }

        function hideFormError(formType) {
            const errorDiv = document.getElementById(`${formType}-form-error`);
            errorDiv.classList.add('hidden');
        }

        // Carregar produtos admin
        function loadAdminProducts() {
            const container = document.getElementById('admin-products-grid');
            if (!container) return;

            let html = '';
            productsDB.forEach(product => {
                const categoryName = categoryData[product.category]?.sb_name || product.category;
                
                html += `
                    <div class="admin-product-card">
                        <div class="h-48 bg-gray-50 dark:bg-gray-700 flex items-center justify-center p-4">
                            <img src="${product.image}" alt="${product.name}" class="max-h-full max-w-full object-contain">
                        </div>
                        <div class="p-4">
                            <span class="text-xs bg-primary text-white px-2 py-1 rounded">${categoryName}</span>
                            <h3 class="font-bold mt-2 mb-2">${product.name}</h3>
                            <div class="flex items-center justify-between mb-4">
                                <div class="text-primary font-bold text-lg">R$ ${product.price.toFixed(2).replace('.', ',')}</div>
                                <div class="text-sm text-gray-500">${product.weight || ''}</div>
                            </div>
                            <div class="flex gap-2">
                                <button class="edit-product-btn flex-1 bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600" data-id="${product.sb_product_id}">
                                    <i class="fas fa-edit mr-1"></i> Editar
                                </button>
                                <button class="delete-product-btn flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600" data-id="${product.sb_product_id}">
                                    <i class="fas fa-trash mr-1"></i> Excluir
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<div class="col-span-full text-center py-12 text-gray-500">Nenhum produto encontrado</div>';

            // Adicionar eventos
            setupAdminProductEvents();
        }

        // Carregar categorias admin
        function loadAdminCategories() {
            const container = document.getElementById('admin-categories-grid');
            if (!container) return;

            let html = '';
            Object.keys(categoryData).forEach(code => {
                if (code === 'todos') return; // Não mostrar categoria "todos" no admin
                
                const category = categoryData[code];
                const productCount = productsDB.filter(p => p.category === code).length;
                
                html += `
                    <div class="admin-category-card">
                        <div class="bg-primary text-white p-4">
                            <h3 class="font-bold text-lg">${category.sb_name}</h3>
                            <span class="text-sm bg-white bg-opacity-20 px-2 py-1 rounded">${code}</span>
                        </div>
                        <div class="p-4">
                            <p class="text-gray-600 dark:text-gray-400 mb-4">${category.sb_description}</p>
                            <div class="bg-gray-50 dark:bg-gray-700 p-3 rounded mb-4 text-center">
                                <span class="text-2xl font-bold text-primary">${productCount}</span>
                                <span class="block text-sm text-gray-500">Produtos</span>
                            </div>
                            <div class="flex gap-2">
                                <button class="edit-category-btn flex-1 bg-blue-500 text-white py-2 px-3 rounded text-sm hover:bg-blue-600" data-id="${category.sb_category_id}">
                                    <i class="fas fa-edit mr-1"></i> Editar
                                </button>
                                <button class="delete-category-btn flex-1 bg-red-500 text-white py-2 px-3 rounded text-sm hover:bg-red-600" data-id="${category.sb_category_id}">
                                    <i class="fas fa-trash mr-1"></i> Excluir
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<div class="col-span-full text-center py-12 text-gray-500">Nenhuma categoria encontrada</div>';

            setupAdminCategoryEvents();
        }

        // Carregar pedidos
        function loadOrders() {
            const container = document.getElementById('orders-list');
            if (!container) return;

            const statusFilter = document.getElementById('order-status-filter').value;
            let filteredOrders = ordersDB;
            
            if (statusFilter !== 'all') {
                filteredOrders = filteredOrders.filter(o => o.status === statusFilter);
            }

            let html = '';
            filteredOrders.forEach(order => {
                const orderDate = new Date(order.created_at).toLocaleDateString('pt-BR');
                const statusClass = order.status === 'pending' ? 'bg-orange-100 text-orange-800' : 
                                   order.status === 'delivered' ? 'bg-green-100 text-green-800' : 
                                   'bg-red-100 text-red-800';

                html += `
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-4">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h4 class="font-bold">Pedido #${order.id}</h4>
                                <p class="text-sm text-gray-500">${orderDate}</p>
                                <p class="text-sm text-gray-500">${order.customer_name}</p>
                            </div>
                            <div class="text-right">
                                <span class="px-2 py-1 rounded text-xs ${statusClass}">
                                    ${order.status === 'pending' ? 'Pendente' : order.status === 'delivered' ? 'Entregue' : 'Cancelado'}
                                </span>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <div class="flex justify-between items-center">
                                <div>
                                    <p class="font-bold text-lg">R$ ${order.total_amount.toFixed(2).replace('.', ',')}</p>
                                    <p class="text-sm text-gray-500">${order.items ? JSON.parse(order.items).length : 0} item(s)</p>
                                </div>
                                <div class="flex gap-2">
                                    <button class="view-order-btn bg-blue-500 text-white px-3 py-1 rounded text-sm" data-id="${order.id}">Ver Detalhes</button>
                                    ${order.status === 'pending' ? `
                                        <button class="mark-delivered-btn bg-green-500 text-white px-3 py-1 rounded text-sm" data-id="${order.id}">Marcar Entregue</button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html || '<div class="text-center py-12 text-gray-500">Nenhum pedido encontrado</div>';

            setupOrderEvents();
        }

        // Atualizar dashboard
        function updateDashboard() {
            const today = new Date();
            const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
            const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());

            const dailySales = ordersDB
                .filter(o => o.status === 'delivered' && new Date(o.created_at) >= startOfDay)
                .reduce((sum, o) => sum + o.total_amount, 0);

            const monthlySales = ordersDB
                .filter(o => o.status === 'delivered' && new Date(o.created_at) >= startOfMonth)
                .reduce((sum, o) => sum + o.total_amount, 0);

            const pendingOrders = ordersDB.filter(o => o.status === 'pending').length;

            document.getElementById('sales-today').textContent = `R$ ${dailySales.toFixed(2).replace('.', ',')}`;
            document.getElementById('sales-month').textContent = `R$ ${monthlySales.toFixed(2).replace('.', ',')}`;
            document.getElementById('pending-orders').textContent = pendingOrders;
            document.getElementById('total-products').textContent = productsDB.length;

            loadRecentOrders();
        }

        // Carregar últimos pedidos
        function loadRecentOrders() {
            const container = document.getElementById('recent-orders');
            const recentOrders = ordersDB.slice(0, 5);

            if (recentOrders.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-shopping-bag text-3xl mb-2"></i>
                        <p>Nenhum pedido encontrado</p>
                    </div>
                `;
                return;
            }

            let html = '';
            recentOrders.forEach(order => {
                const orderDate = new Date(order.created_at).toLocaleDateString('pt-BR');
                html += `
                    <div class="flex justify-between items-center p-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0">
                        <div>
                            <p class="font-semibold">Pedido #${order.id}</p>
                            <p class="text-sm text-gray-500">${order.customer_name} - ${orderDate}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-bold">R$ ${order.total_amount.toFixed(2).replace('.', ',')}</p>
                            <span class="text-xs px-2 py-1 rounded ${order.status === 'pending' ? 'bg-orange-100 text-orange-800' : 'bg-green-100 text-green-800'}">
                                ${order.status === 'pending' ? 'Pendente' : 'Entregue'}
                            </span>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Eventos admin produtos
        function setupAdminProductEvents() {
            document.querySelectorAll('.edit-product-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    editProduct(id);
                });
            });

            document.querySelectorAll('.delete-product-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    deleteProduct(id);
                });
            });
        }

        // Eventos admin categorias
        function setupAdminCategoryEvents() {
            document.querySelectorAll('.edit-category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    editCategory(id);
                });
            });

            document.querySelectorAll('.delete-category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    deleteCategory(id);
                });
            });
        }

        // Eventos pedidos
        function setupOrderEvents() {
            document.querySelectorAll('.view-order-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    viewOrderDetails(id);
                });
            });

            document.querySelectorAll('.mark-delivered-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const id = parseInt(btn.getAttribute('data-id'));
                    markOrderAsDelivered(id);
                });
            });
        }

        // Ver detalhes do pedido
        function viewOrderDetails(orderId) {
            const order = ordersDB.find(o => o.id === orderId);
            if (!order) return;

            const modal = document.getElementById('order-details-modal');
            const content = document.getElementById('order-details-content');
            
            const orderDate = new Date(order.created_at).toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            const items = order.items ? JSON.parse(order.items) : [];
            
            let itemsHtml = '';
            items.forEach(item => {
                itemsHtml += `
                    <div class="flex justify-between items-center py-2 border-b last:border-b-0">
                        <div>
                            <p class="font-semibold">${item.name}</p>
                            <p class="text-sm text-gray-500">Quantidade: ${item.quantity}</p>
                        </div>
                        <p class="font-bold">R$ ${(item.price * item.quantity).toFixed(2).replace('.', ',')}</p>
                    </div>
                `;
            });

            content.innerHTML = `
                <div class="mb-4">
                    <h4 class="font-bold text-lg mb-2">Pedido #${order.id}</h4>
                    <p><strong>Data:</strong> ${orderDate}</p>
                    <p><strong>Cliente:</strong> ${order.customer_name}</p>
                    <p><strong>Telefone:</strong> ${order.customer_phone}</p>
                </div>
                
                <div class="mb-4">
                    <h5 class="font-bold mb-2">Itens do Pedido:</h5>
                    ${itemsHtml}
                </div>
                
                <div class="border-t pt-4">
                    <div class="flex justify-between mb-2">
                        <span>Subtotal:</span>
                        <span>R$ ${order.subtotal_amount.toFixed(2).replace('.', ',')}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span>Frete:</span>
                        <span>R$ ${order.shipping_amount.toFixed(2).replace('.', ',')}</span>
                    </div>
                    <div class="flex justify-between text-lg font-bold">
                        <span>Total:</span>
                        <span>R$ ${order.total_amount.toFixed(2).replace('.', ',')}</span>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        // Marcar pedido como entregue
        async function markOrderAsDelivered(orderId) {
            const result = await updateOrderStatus(orderId, 'delivered');
            if (result.success) {
                showAlert('Pedido marcado como entregue!');
            } else {
                showAlert('Erro ao atualizar pedido!', 'error');
            }
        }

        // Editar produto
        function editProduct(id) {
            const product = productsDB.find(p => p.sb_product_id === id);
            if (!product) return;

            currentEditingId = id;
            
            document.getElementById('product-name').value = product.sb_name;
            document.getElementById('product-category').value = product.sb_category;
            document.getElementById('product-price').value = product.sb_price;
            document.getElementById('product-old-price').value = product.sb_old_price || '';
            document.getElementById('product-weight').value = product.sb_weight || '';
            document.getElementById('product-brand').value = product.sb_brand || '';
            document.getElementById('product-flavors').value = product.sb_flavors || '';
            document.getElementById('product-benefits').value = product.sb_benefits || '';
            document.getElementById('product-ingredients').value = product.sb_ingredients || '';
            document.getElementById('product-usage').value = product.sb_usage || '';
            document.getElementById('product-description').value = product.sb_description || '';
            
            document.getElementById('product-form-title').textContent = 'Editar Produto';
            document.getElementById('product-form-container').classList.remove('hidden');
            hideFormError('product');
        }

        // Editar categoria
        function editCategory(id) {
            const category = Object.values(categoryData).find(cat => cat.sb_category_id === id);
            if (!category) return;

            currentEditingId = id;
            
            document.getElementById('category-name').value = category.sb_name;
            document.getElementById('category-code').value = category.sb_code;
            document.getElementById('category-description').value = category.sb_description;
            
            document.getElementById('category-form-title').textContent = 'Editar Categoria';
            document.getElementById('category-form-container').classList.remove('hidden');
            hideFormError('category');
        }

        // Atualizar filtros de categoria
        function updateCategoryFilters() {
            // Atualizar select do produto
            const productCategorySelect = document.getElementById('product-category');
            
            if (productCategorySelect) {
                while (productCategorySelect.options.length > 1) {
                    productCategorySelect.remove(1);
                }
                
                Object.keys(categoryData).forEach(code => {
                    if (code === 'todos') return; // Não adicionar "todos" no select
                    
                    const option = document.createElement('option');
                    option.value = code;
                    option.textContent = categoryData[code].sb_name;
                    productCategorySelect.appendChild(option);
                });
            }

            // Atualizar filtros de categoria no site
            const categoryFilters = document.getElementById('category-filters');
            if (categoryFilters) {
                // Manter o botão "Todos"
                let filtersHTML = '<button data-filter="todos" class="filter-btn bg-primary text-white hover:bg-primary hover:bg-opacity-90 px-6 py-2.5 rounded-full text-sm font-medium transition active">Todos</button>';
                
                // Adicionar botões para cada categoria
                Object.keys(categoryData).forEach(code => {
                    if (code === 'todos') return; // Já adicionamos o botão "todos"
                    
                    const category = categoryData[code];
                    filtersHTML += `<button data-filter="${code}" class="filter-btn bg-gray-100 dark:bg-dark-200 hover:bg-primary hover:text-white px-6 py-2.5 rounded-full text-sm font-medium transition">${category.sb_name}</button>`;
                });
                
                categoryFilters.innerHTML = filtersHTML;
                setupCategoryFilters(); // Reconfigurar eventos
            }

            // Atualizar categorias no footer
            const footerCategories = document.getElementById('footer-categories');
            if (footerCategories) {
                let footerHTML = '';
                Object.keys(categoryData).forEach(code => {
                    if (code === 'todos') return; // Não mostrar "todos" no footer
                    
                    const category = categoryData[code];
                    footerHTML += `<li><a href="#" class="text-gray-300 hover:text-white transition-colors">${category.sb_name}</a></li>`;
                });
                
                footerCategories.innerHTML = footerHTML;
            }
        }

        // Atualizar display do frete
        function updateShippingDisplay() {
            const shippingPriceInput = document.getElementById('shipping-price');
            const freeShippingLimitInput = document.getElementById('free-shipping-limit');
            
            if (shippingPriceInput) {
                shippingPriceInput.value = shippingConfig.price;
            }
            if (freeShippingLimitInput) {
                freeShippingLimitInput.value = shippingConfig.freeShippingLimit;
            }
        }

        // Atualizar display das credenciais
        function updateCredentialsDisplay() {
            const usernameInput = document.getElementById('new-admin-username');
            const passwordInput = document.getElementById('new-admin-password');
            const confirmPasswordInput = document.getElementById('confirm-admin-password');
            
            if (usernameInput) {
                usernameInput.value = adminCredentials.username;
            }
        }

        // Mudar aba admin
        function changeAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.add('hidden'));
            document.getElementById(`admin-tab-${tab}`).classList.remove('hidden');
            
            document.querySelectorAll('.admin-nav-item').forEach(item => item.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active');

            currentAdminTab = tab;
            
            if (tab === 'products') loadAdminProducts();
            if (tab === 'categories') loadAdminCategories();
            if (tab === 'orders') loadOrders();
            if (tab === 'dashboard') updateDashboard();
            if (tab === 'settings') {
                updateShippingDisplay();
                updateCredentialsDisplay();
            }
        }

        // Configurar upload de imagens
        function setupImageUpload(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const uploadContainer = input.parentElement;

            uploadContainer.addEventListener('click', () => input.click());

            input.addEventListener('change', () => {
                const files = Array.from(input.files);
                preview.innerHTML = '';

                files.forEach(file => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'image-preview';
                        preview.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                });
            });
        }

        // Mostrar alerta
        function showAlert(message, type = 'success') {
            const alert = document.getElementById('alert-message');
            const text = document.getElementById('alert-text');
            
            text.textContent = message;
            
            if (type === 'error') {
                alert.className = alert.className.replace('bg-green-500', 'bg-red-500');
            } else {
                alert.className = alert.className.replace('bg-red-500', 'bg-green-500');
            }
            
            alert.classList.remove('opacity-0', 'translate-y-full');
            
            setTimeout(() => {
                alert.classList.add('opacity-0', 'translate-y-full');
            }, 3000);
        }

        // Mostrar/esconder área administrativa - CORRIGIDO
        function showAdminPanel() {
            // Esconder completamente o site principal
            document.getElementById('main-site').style.display = 'none';
            
            // Mostrar apenas o painel admin ocupando toda a tela
            const adminPanel = document.getElementById('admin-panel');
            adminPanel.style.display = 'block';
            adminPanel.classList.add('active');
            
            // Adicionar classe ao body para garantir que nada do site apareça
            document.body.classList.add('admin-active');
            
            // Desabilitar scroll do body principal
            document.body.style.overflow = 'hidden';
        }

        function hideAdminPanel() {
            // Mostrar o site principal
            document.getElementById('main-site').style.display = 'block';
            
            // Esconder o painel admin
            const adminPanel = document.getElementById('admin-panel');
            adminPanel.style.display = 'none';
            adminPanel.classList.remove('active');
            
            // Remover classe do body
            document.body.classList.remove('admin-active');
            
            // Restaurar scroll normal
            document.body.style.overflow = 'auto';
        }

        // Sistema de carrinho
        const cart = {
            items: [],
            
            init() {
                this.loadCart();
                this.updateUI();
            },
            
            loadCart() {
                try {
                    const savedCart = sessionStorage.getItem('suplementos-bahia-cart');
                    if (savedCart) {
                        this.items = JSON.parse(savedCart);
                    }
                } catch (e) {
                    console.log('Erro ao carregar carrinho:', e);
                }
            },
            
            saveCart() {
                try {
                    sessionStorage.setItem('suplementos-bahia-cart', JSON.stringify(this.items));
                } catch (e) {
                    console.log('Erro ao salvar carrinho:', e);
                }
            },
            
            addItem(product, quantity = 1) {
                const existingItem = this.items.find(item => item.id === product.id);
                
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    this.items.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: quantity
                    });
                }
                
                this.saveCart();
                this.updateUI();
                return true;
            },
            
            removeItem(id) {
                this.items = this.items.filter(item => item.id !== id);
                this.saveCart();
                this.updateUI();
            },
            
            updateQuantity(id, quantity) {
                const item = this.items.find(item => item.id === id);
                if (item) {
                    if (quantity <= 0) {
                        this.removeItem(id);
                    } else {
                        item.quantity = quantity;
                        this.saveCart();
                        this.updateUI();
                    }
                }
            },
            
            getTotal() {
                return this.items.reduce((total, item) => total + (item.price * item.quantity), 0);
            },
            
            getCount() {
                return this.items.reduce((count, item) => count + item.quantity, 0);
            },
            
            updateUI() {
                // Atualizar contador
                const count = this.getCount();
                document.getElementById('cart-count').textContent = count;
                document.getElementById('cart-items-count').textContent = count;
                
                // Atualizar subtotal
                document.getElementById('cart-subtotal').textContent = `R$${this.getTotal().toFixed(2).replace('.', ',')}`;
                
                // Mostrar/ocultar mensagem de carrinho vazio
                const emptyCart = document.getElementById('empty-cart');
                emptyCart.style.display = this.items.length === 0 ? 'flex' : 'none';
                
                // Renderizar itens
                this.renderItems();
                
                // Adicionar efeito de pulso ao botão do carrinho quando adicionar item
                if (count > 0) {
                    const cartBtn = document.getElementById('cart-toggle');
                    cartBtn.classList.add('btn-pulse');
                    setTimeout(() => {
                        cartBtn.classList.remove('btn-pulse');
                    }, 1000);
                }
            },
            
            renderItems() {
                const container = document.getElementById('cart-items');
                
                // Remover itens existentes (exceto mensagem de carrinho vazio)
                const existingItems = container.querySelectorAll('.cart-item');
                existingItems.forEach(item => container.removeChild(item));
                
                // Adicionar itens
                this.items.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item flex items-center p-4 border-b border-gray-200 dark:border-gray-700 animate-fade-in';
                    
                    cartItem.innerHTML = `
                        <div class="w-16 h-16 bg-white dark:bg-gray-700 rounded-lg overflow-hidden mr-3 flex-shrink-0">
                            <img src="${item.image}" alt="${item.name}" class="w-full h-full object-contain" loading="lazy">
                        </div>
                        <div class="flex-grow min-w-0">
                            <h4 class="font-medium text-sm truncate">${item.name}</h4>
                            <div class="text-primary font-medium">R$${item.price.toFixed(2).replace('.', ',')}</div>
                            <div class="flex items-center mt-2">
                                <button class="decrease-btn w-7 h-7 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center transition-colors hover:bg-gray-200 dark:hover:bg-gray-500" data-id="${item.id}" aria-label="Diminuir quantidade">-</button>
                                <span class="mx-3">${item.quantity}</span>
                                <button class="increase-btn w-7 h-7 bg-gray-100 dark:bg-gray-600 rounded-full flex items-center justify-center transition-colors hover:bg-gray-200 dark:hover:bg-gray-500" data-id="${item.id}" aria-label="Aumentar quantidade">+</button>
                            </div>
                        </div>
                        <button class="remove-item text-gray-400 hover:text-red-500 ml-2 transition-colors" data-id="${item.id}" aria-label="Remover item">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    `;
                    
                    container.appendChild(cartItem);
                });
                
                // Adicionar eventos
                document.querySelectorAll('.decrease-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        const item = this.items.find(item => item.id === id);
                        if (item) this.updateQuantity(id, item.quantity - 1);
                    });
                });
                
                document.querySelectorAll('.increase-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        const item = this.items.find(item => item.id === id);
                        if (item) this.updateQuantity(id, item.quantity + 1);
                    });
                });
                
                document.querySelectorAll('.remove-item').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        this.removeItem(id);
                    });
                });
            },
            
            sendToWhatsApp() {
                if (this.items.length === 0) {
                    return;
                }
                
                let message = "Olá! Gostaria de fazer o seguinte pedido:\n\n";
                
                this.items.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    message += `${index + 1}. ${item.name} - Qtd: ${item.quantity} - R$${itemTotal.toFixed(2).replace('.', ',')}\n`;
                });
                
                message += `\nTotal: R$${this.getTotal().toFixed(2).replace('.', ',')}`;
                message += "\n\nPoderia me informar o prazo de entrega e as formas de pagamento?";
                
                window.open(`https://wa.me/5577999152558?text=${encodeURIComponent(message)}`, '_blank');
            }
        };

        // Carregar produtos do banco
        function loadProducts(startIndex = 0, count = 8, filters = {}) {
            const container = document.getElementById('products-container');
            
            if (startIndex === 0) {
                container.innerHTML = '';
            }
            
            // Aplicar filtros nos produtos do banco
            let filteredProducts = productsDB;
            
            // Filtro de categoria
            if (filters.category && filters.category !== 'todos') {
                filteredProducts = filteredProducts.filter(product => product.category === filters.category);
            }
            
            // Filtro de preço
            if (filters.maxPrice) {
                filteredProducts = filteredProducts.filter(product => product.price <= filters.maxPrice);
            }
            
            // Filtro de avaliação
            if (filters.minRating) {
                filteredProducts = filteredProducts.filter(product => product.rating >= filters.minRating);
            }
            
            // Ordenação
            if (filters.sort) {
                switch (filters.sort) {
                    case 'price-asc':
                        filteredProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-desc':
                        filteredProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'rating-desc':
                        filteredProducts.sort((a, b) => b.rating - a.rating);
                        break;
                    case 'name-asc':
                        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    // relevance é a ordem padrão
                }
            }
            
            // Paginação
            const productsToShow = filteredProducts.slice(startIndex, startIndex + count);
            
            // Atualizar controles de paginação
            updatePagination(startIndex, count, filteredProducts.length);
            
            // Gerar HTML dos produtos
            productsToShow.forEach((product, index) => {
                // Gerar HTML para avaliação
                let starsHTML = '';
                const fullStars = Math.floor(product.rating);
                const hasHalfStar = product.rating % 1 >= 0.5;
                
                for (let i = 0; i < 5; i++) {
                    if (i < fullStars) {
                        starsHTML += '<i class="fas fa-star text-yellow-400"></i>';
                    } else if (hasHalfStar && i === fullStars) {
                        starsHTML += '<i class="fas fa-star-half-alt text-yellow-400"></i>';
                    } else {
                        starsHTML += '<i class="far fa-star text-yellow-400"></i>';
                    }
                }
                
                // Badge do produto
                let badgeHTML = '';
                if (product.oldPrice && product.oldPrice > product.price) {
                    badgeHTML = '<span class="absolute top-2 left-2 bg-red-500 text-white text-xs font-medium px-2.5 py-1 rounded-full">Oferta</span>';
                }
                
                // Criar card do produto
                const productCard = document.createElement('div');
                productCard.className = 'bg-white dark:bg-dark-200 rounded-xl shadow-card dark:shadow-card-dark overflow-hidden transition-transform hover-scale hover:shadow-card-hover animate-fade-in product-card';
                productCard.setAttribute('data-id', product.id);
                productCard.setAttribute('data-category', product.category);
                
                productCard.innerHTML = `
                    <div class="relative h-44 bg-white dark:bg-dark-100 p-3 flex items-center justify-center">
                        ${badgeHTML}
                        <img src="${product.image}" alt="${product.name}" class="max-h-full max-w-full object-contain" loading="lazy">
                        <button class="quick-view-btn absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity" data-id="${product.id}" aria-label="Visualização rápida">
                            <span class="bg-white dark:bg-dark-200 text-gray-800 dark:text-white px-3 py-1.5 rounded-full text-sm font-medium">
                                <i class="fas fa-eye mr-1"></i> Ver detalhes
                            </span>
                        </button>
                    </div>
                    <div class="p-4">
                        <div class="text-xs text-gray-500 dark:text-gray-400 mb-1">${getCategoryName(product.category)}</div>
                        <h3 class="font-medium text-sm md:text-base mb-1 line-clamp-2 h-10">${product.name}</h3>
                        <div class="flex mb-2 text-xs">${starsHTML} <span class="ml-1 text-gray-500">(${Math.floor(Math.random() * 100)})</span></div>
                        <div class="flex items-center justify-between mb-3">
                            ${product.oldPrice ? `<span class="text-gray-500 dark:text-gray-400 line-through text-sm">R$${product.oldPrice.toFixed(2).replace('.', ',')}</span>` : '<span></span>'}
                            <span class="text-primary font-bold text-lg">R$${product.price.toFixed(2).replace('.', ',')}</span>
                        </div>
                        <button class="add-to-cart w-full bg-primary hover:bg-opacity-90 text-white py-2.5 rounded-full transition-all hover:shadow-lg transform hover:-translate-y-1">
                            <i class="fas fa-shopping-cart mr-2"></i>Adicionar
                        </button>
                    </div>
                `;
                
                container.appendChild(productCard);
                
                // Adicionar animação de entrada com delay baseado no índice
                setTimeout(() => {
                    productCard.classList.add('animate-fade-in');
                }, index * 100);
                
                // Adicionar evento ao botão
                productCard.querySelector('.add-to-cart').addEventListener('click', (e) => {
                    e.stopPropagation();
                    cart.addItem(product);
                    
                    // Animação de adição ao carrinho
                    const button = e.currentTarget;
                    button.innerHTML = '<i class="fas fa-check mr-2"></i>Adicionado';
                    button.classList.add('bg-green-500');
                    
                    setTimeout(() => {
                        button.innerHTML = '<i class="fas fa-shopping-cart mr-2"></i>Adicionar';
                        button.classList.remove('bg-green-500');
                    }, 1500);
                });
                
                // Adicionar evento para quick view
                productCard.querySelector('.quick-view-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    showQuickView(product);
                });
            });
            
            // Se não houver produtos, mostrar mensagem
            if (productsToShow.length === 0) {
                const noProducts = document.createElement('div');
                noProducts.className = 'col-span-full py-8 text-center text-gray-500 dark:text-gray-400';
                noProducts.innerHTML = `
                    <i class="fas fa-search text-4xl mb-3"></i>
                    <p>Nenhum produto encontrado.</p>
                    <p class="text-sm mt-2">Adicione produtos através do painel administrativo.</p>
                `;
                container.appendChild(noProducts);
            }
            
            return productsToShow.length;
        }
        
        // Atualizar paginação
        function updatePagination(startIndex, count, totalCount) {
            const loadMoreBtn = document.getElementById('load-more');
            const paginationContainer = document.getElementById('pagination');
            
            // Configurar botão "Carregar mais"
            if (startIndex + count < totalCount) {
                loadMoreBtn.classList.remove('hidden');
                
                // Remover event listeners antigos
                const newLoadMoreBtn = loadMoreBtn.cloneNode(true);
                loadMoreBtn.parentNode.replaceChild(newLoadMoreBtn, loadMoreBtn);
                
                newLoadMoreBtn.addEventListener('click', () => {
                    const activeFilter = document.querySelector('.filter-btn.active');
                    const category = activeFilter ? activeFilter.getAttribute('data-filter') : 'todos';
                    
                    loadProducts(startIndex + count, count, {
                        category: category === 'todos' ? null : category
                    });
                });
            } else {
                loadMoreBtn.classList.add('hidden');
            }
            
            // Limpar paginação numérica por enquanto
            paginationContainer.innerHTML = '';
        }
        
        // Pesquisa de produtos
        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            const searchResults = document.getElementById('search-results');
            
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.toLowerCase().trim();
                
                if (query.length < 2) {
                    searchResults.innerHTML = '';
                    return;
                }
                
                const results = productsDB.filter(product => 
                    product.name.toLowerCase().includes(query) ||
                    getCategoryName(product.category).toLowerCase().includes(query)
                );
                
                renderSearchResults(results, query);
            });
        }
        
        function renderSearchResults(results, query) {
            const searchResults = document.getElementById('search-results');
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = `
                    <div class="bg-white dark:bg-dark-200 rounded-xl shadow-card p-4 text-center text-gray-500 dark:text-gray-400">
                        <p>Nenhum produto encontrado para "${query}"</p>
                    </div>
                `;
                return;
            }
            
            // Limitar a 5 resultados
            const limitedResults = results.slice(0, 5);
            
            // Criar container para resultados
            const resultsContainer = document.createElement('div');
            resultsContainer.className = 'bg-white dark:bg-dark-200 rounded-xl shadow-card overflow-hidden';
            
            // Adicionar cada resultado
            limitedResults.forEach(product => {
                const resultItem = document.createElement('div');
                resultItem.className = 'flex items-center p-3 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-dark-100 cursor-pointer transition-colors';
                
                resultItem.innerHTML = `
                    <div class="w-12 h-12 bg-white dark:bg-dark-300 rounded-lg overflow-hidden mr-3 flex-shrink-0">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-contain" loading="lazy">
                    </div>
                    <div>
                        <h4 class="font-medium text-sm">${highlightSearch(product.name, query)}</h4>
                        <div class="text-xs text-gray-500 dark:text-gray-400">${getCategoryName(product.category)}</div>
                        <div class="text-primary font-medium text-sm">R$${product.price.toFixed(2).replace('.', ',')}</div>
                    </div>
                `;
                
                resultItem.addEventListener('click', () => {
                    showQuickView(product);
                    document.getElementById('search-container').classList.add('hidden');
                });
                
                resultsContainer.appendChild(resultItem);
            });
            
            searchResults.appendChild(resultsContainer);
        }
        
        // Destaca o texto de busca nos resultados
        function highlightSearch(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="bg-yellow-100 dark:bg-yellow-800 text-gray-800 dark:text-yellow-100">$1</span>');
        }
        
        // Mostrar modal de quick view
        function showQuickView(product) {
            const modal = document.getElementById('quickview-modal');
            const content = document.getElementById('quickview-content');
            const title = document.getElementById('quickview-title');
            
            title.textContent = product.name;
            
            // Gerar HTML para avaliação
            let starsHTML = '';
            const fullStars = Math.floor(product.rating);
            const hasHalfStar = product.rating % 1 >= 0.5;
            
            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    starsHTML += '<i class="fas fa-star text-yellow-400"></i>';
                } else if (hasHalfStar && i === fullStars) {
                    starsHTML += '<i class="fas fa-star-half-alt text-yellow-400"></i>';
                } else {
                    starsHTML += '<i class="far fa-star text-yellow-400"></i>';
                }
            }
            
            content.innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white dark:bg-dark-100 rounded-xl p-5 flex items-center justify-center">
                        <img src="${product.image}" alt="${product.name}" class="max-h-64 max-w-full object-contain">
                    </div>
                    <div>
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-sm text-gray-500 dark:text-gray-400">${getCategoryName(product.category)}</span>
                            <div class="flex text-sm">${starsHTML} <span class="ml-1 text-gray-500">(${Math.floor(Math.random() * 100)})</span></div>
                        </div>
                        
                        <h3 class="text-xl font-medium mb-2">${product.name}</h3>
                        
                        <div class="flex items-center mb-4">
                            ${product.oldPrice ? `<span class="text-gray-500 dark:text-gray-400 line-through mr-2">R$${product.oldPrice.toFixed(2).replace('.', ',')}</span>` : ''}
                            <span class="text-primary font-bold text-2xl">R$${product.price.toFixed(2).replace('.', ',')}</span>
                        </div>
                        
                        <p class="text-gray-700 dark:text-gray-300 mb-6">${product.description || 'Produto de alta qualidade para suas necessidades.'}</p>
                        
                        <div class="flex space-x-3">
                            <div class="w-24">
                                <label for="product-quantity" class="block text-sm font-medium mb-1">Quantidade</label>
                                <select id="product-quantity" class="w-full p-2 border border-gray-300 dark:border-gray-600 rounded-full bg-white dark:bg-dark-300 focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                            <div class="flex-grow">
                                <button class="quickview-add-to-cart w-full bg-primary hover:bg-opacity-90 text-white py-2.5 rounded-full transition-all hover:shadow-lg transform hover:-translate-y-1 flex items-center justify-center mt-6" data-id="${product.id}">
                                    <i class="fas fa-shopping-cart mr-2"></i>
                                    Adicionar ao Carrinho
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Mostrar modal
            modal.classList.remove('hidden');
            
            // Adicionar evento ao botão de adicionar ao carrinho
            const addToCartBtn = content.querySelector('.quickview-add-to-cart');
            addToCartBtn.addEventListener('click', () => {
                const quantity = parseInt(document.getElementById('product-quantity').value);
                cart.addItem(product, quantity);
                
                // Animação de adição ao carrinho
                addToCartBtn.innerHTML = '<i class="fas fa-check mr-2"></i>Adicionado com sucesso!';
                addToCartBtn.classList.add('bg-green-500');
                
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 1000);
            });
            
            // Fechar modal quando clicar no X
            document.getElementById('close-quickview').addEventListener('click', () => {
                modal.classList.add('hidden');
            });
            
            // Fechar modal quando clicar fora dele
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        }

        // Setup acordeões
        function setupAccordions() {
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('i');
                    const isExpanded = header.getAttribute('aria-expanded') === 'true';
                    
                    // Atualizar atributo ARIA
                    header.setAttribute('aria-expanded', !isExpanded);
                    
                    // Toggle conteúdo
                    content.classList.toggle('hidden');
                    
                    // Rotação do ícone
                    if (content.classList.contains('hidden')) {
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
        }

        // Setup FAQ
        function setupFAQ() {
            document.querySelectorAll('.faq-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('i');
                    const isExpanded = header.getAttribute('aria-expanded') === 'true';
                    
                    // Atualizar atributo ARIA
                    header.setAttribute('aria-expanded', !isExpanded);
                    
                    // Toggle conteúdo
                    content.classList.toggle('hidden');
                    
                    // Rotação do ícone
                    if (content.classList.contains('hidden')) {
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        icon.style.transform = 'rotate(180deg)';
                    }
                });
            });
        }

        // Setup Hero Slider
        function setupHeroSlider() {
            // Função para verificar se estamos no mobile
            function isMobile() {
                return window.innerWidth <= 768;
            }
            
            let currentSlide = 0;
            let interval;
            let slidesData = [];
            
            function updateSlides() {
                const allSlides = document.querySelectorAll('.hero-slide');
                const controls = document.getElementById('hero-controls');
                
                // Filtrar slides baseado no viewport atual
                if (isMobile()) {
                    slidesData = Array.from(allSlides).filter(slide => slide.classList.contains('hero-mobile'));
                } else {
                    slidesData = Array.from(allSlides).filter(slide => slide.classList.contains('hero-desktop'));
                }
                
                // Limpar controles existentes
                controls.innerHTML = '';
                
                // Criar novos pontos de controle
                slidesData.forEach((_, index) => {
                    const dot = document.createElement('button');
                    dot.className = `w-3 h-3 rounded-full bg-white bg-opacity-50 ${index === 0 ? 'bg-opacity-100' : ''}`;
                    dot.addEventListener('click', () => goToSlide(index));
                    dot.setAttribute('aria-label', `Slide ${index + 1}`);
                    controls.appendChild(dot);
                });
                
                // Reset para o primeiro slide
                currentSlide = 0;
                goToSlide(0);
            }
            
            function goToSlide(index) {
                // Remover classe ativa de todos os slides
                slidesData.forEach(slide => slide.classList.remove('active'));
                
                // Adicionar classe ativa ao slide atual
                if (slidesData[index]) {
                    slidesData[index].classList.add('active');
                }
                
                // Atualizar pontos de controle
                const dots = document.getElementById('hero-controls').querySelectorAll('button');
                dots.forEach((dot, i) => {
                    dot.classList.toggle('bg-opacity-100', i === index);
                    dot.classList.toggle('bg-opacity-50', i !== index);
                    dot.setAttribute('aria-current', i === index ? 'true' : 'false');
                });
                
                currentSlide = index;
            }
            
            function nextSlide() {
                if (slidesData.length > 0) {
                    goToSlide((currentSlide + 1) % slidesData.length);
                }
            }
            
            function startAutoplay() {
                clearInterval(interval);
                if (slidesData.length > 1) {
                    interval = setInterval(nextSlide, 5000);
                }
            }
            
            // Inicializar
            updateSlides();
            startAutoplay();
            
            // Atualizar slides quando redimensionar a janela
            window.addEventListener('resize', () => {
                updateSlides();
                startAutoplay();
            });
            
            // Pausar autoplay ao passar mouse
            const heroGallery = document.getElementById('hero-gallery');
            heroGallery.addEventListener('mouseenter', () => clearInterval(interval));
            heroGallery.addEventListener('mouseleave', startAutoplay);
        }

        // Filtros de categoria
        function setupCategoryFilters() {
            const filters = document.querySelectorAll('.filter-btn');
            
            filters.forEach(filter => {
                filter.addEventListener('click', function() {
                    // Remover classe ativa de todos os filtros
                    filters.forEach(f => {
                        f.classList.remove('bg-primary', 'text-white', 'active');
                        f.classList.add('bg-gray-100', 'dark:bg-dark-200');
                    });
                    
                    // Adicionar classe ativa ao filtro clicado
                    this.classList.remove('bg-gray-100', 'dark:bg-dark-200');
                    this.classList.add('bg-primary', 'text-white', 'active');
                    
                    const category = this.getAttribute('data-filter');
                    
                    // Carregar produtos filtrados
                    loadProducts(0, 8, {
                        category: category === 'todos' ? null : category
                    });
                });
            });
        }
        
        // Resetar filtros
        function resetFilters() {
            // Reset de categoria
            const categoryFilters = document.querySelectorAll('.filter-btn');
            categoryFilters.forEach(f => {
                f.classList.remove('bg-primary', 'text-white', 'active');
                f.classList.add('bg-gray-100', 'dark:bg-dark-200');
            });
            
            const allFilter = document.querySelector('[data-filter="todos"]');
            if (allFilter) {
                allFilter.classList.remove('bg-gray-100', 'dark:bg-dark-200');
                allFilter.classList.add('bg-primary', 'text-white', 'active');
            }
            
            // Recarregar produtos
            loadProducts(0, 8);
        }

        // Botão voltar ao topo
        function setupBackToTop() {
            const backToTop = document.getElementById('back-to-top');
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTop.classList.remove('opacity-0', 'invisible');
                    backToTop.classList.add('opacity-100', 'visible');
                } else {
                    backToTop.classList.add('opacity-0', 'invisible');
                    backToTop.classList.remove('opacity-100', 'visible');
                }
            });
            
            backToTop.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Toggle para busca, menu mobile e carrinho
        function setupToggles() {
            // Busca
            const searchToggle = document.getElementById('search-toggle');
            const searchContainer = document.getElementById('search-container');
            const searchClose = document.getElementById('search-close');
            const searchInput = document.getElementById('search-input');
            
            searchToggle.addEventListener('click', () => {
                searchContainer.classList.toggle('hidden');
                if (!searchContainer.classList.contains('hidden')) {
                    searchInput.focus();
                }
            });
            
            searchClose.addEventListener('click', () => {
                searchContainer.classList.add('hidden');
            });
            
            // Menu mobile
            const mobileToggle = document.getElementById('mobile-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            
            mobileToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                
                // Trocar ícone
                const icon = mobileToggle.querySelector('i');
                if (mobileMenu.classList.contains('hidden')) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                    mobileToggle.setAttribute('aria-expanded', 'false');
                } else {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                    mobileToggle.setAttribute('aria-expanded', 'true');
                }
            });
            
            // Carrinho
            const cartToggle = document.getElementById('cart-toggle');
            const cartPanel = document.getElementById('cart-panel');
            const closeCart = document.getElementById('close-cart');
            const overlay = document.getElementById('overlay');
            
            cartToggle.addEventListener('click', () => {
                cartPanel.classList.remove('translate-x-full');
                overlay.classList.remove('hidden');
                cartToggle.setAttribute('aria-expanded', 'true');
            });
            
            closeCart.addEventListener('click', () => {
                cartPanel.classList.add('translate-x-full');
                overlay.classList.add('hidden');
                cartToggle.setAttribute('aria-expanded', 'false');
            });
            
            overlay.addEventListener('click', () => {
                cartPanel.classList.add('translate-x-full');
                overlay.classList.add('hidden');
                mobileMenu.classList.add('hidden');
                
                // Restaurar ícone
                const icon = mobileToggle.querySelector('i');
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
                
                // Atualizar estado ARIA
                mobileToggle.setAttribute('aria-expanded', 'false');
                cartToggle.setAttribute('aria-expanded', 'false');
                
                // Fechar quickview se estiver aberto
                document.getElementById('quickview-modal').classList.add('hidden');
            });
            
            // Fechar menu mobile ao clicar em links
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    const icon = mobileToggle.querySelector('i');
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                    mobileToggle.setAttribute('aria-expanded', 'false');
                });
            });
            
            // Toggle modo escuro
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                
                // Trocar ícone
                const isDark = document.documentElement.classList.contains('dark');
                themeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                themeToggle.setAttribute('aria-label', isDark ? 'Mudar para tema claro' : 'Mudar para tema escuro');
            });

            // Toggle modo escuro admin
            const adminThemeToggle = document.getElementById('admin-theme-toggle');
            if (adminThemeToggle) {
                adminThemeToggle.addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                    
                    // Trocar ícone
                    const isDark = document.documentElement.classList.contains('dark');
                    adminThemeToggle.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                });
            }
        }

        // Finalizar pedido
        function setupCheckout() {
            document.getElementById('finalizar-pedido').addEventListener('click', () => {
                cart.sendToWhatsApp();
            });
        }

        // Formatador para nomes de categorias
        function getCategoryName(category) {
            return categoryData[category]?.sb_name || category;
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar Supabase
            if (initSupabase()) {
                loadAdminData();
            } else {
                // Carregar dados demo se não conseguir conectar
                loadDemoData();
            }

            // Inicializar o carrinho
            cart.init();
            
            // Configurar acordeões do guia
            setupAccordions();
            
            // Configurar FAQs
            setupFAQ();
            
            // Configurar slider do hero
            setupHeroSlider();
            
            // Configurar filtros de categoria
            setupCategoryFilters();
            
            // Configurar botão voltar ao topo
            setupBackToTop();
            
            // Configurar toggles
            setupToggles();
            
            // Configurar busca
            setupSearch();
            
            // Configurar finalização de pedido
            setupCheckout();

            // Configurar admin
            setupAdminPanel();
        });

        function setupAdminPanel() {
            // Login admin
            document.getElementById('admin-login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === adminCredentials.username && password === adminCredentials.password) {
                    isAdminLoggedIn = true;
                    document.getElementById('admin-login').classList.add('hidden');
                    document.getElementById('admin-dashboard').classList.remove('hidden');
                    loadAdminData();
                } else {
                    document.getElementById('admin-login-error').classList.remove('hidden');
                }
            });

            // Logout admin
            document.getElementById('admin-logout').addEventListener('click', () => {
                isAdminLoggedIn = false;
                hideAdminPanel();
                document.getElementById('admin-login').classList.remove('hidden');
                document.getElementById('admin-dashboard').classList.add('hidden');
                document.getElementById('admin-login-error').classList.add('hidden');
                document.getElementById('admin-username').value = '';
                document.getElementById('admin-password').value = '';
            });

            // Voltar ao site
            document.getElementById('back-to-site').addEventListener('click', () => {
                hideAdminPanel();
            });

            // Links para admin
            document.getElementById('admin-link').addEventListener('click', (e) => {
                e.preventDefault();
                showAdminPanel();
                if (isAdminLoggedIn) {
                    loadAdminData();
                }
            });

            document.getElementById('admin-link-mobile').addEventListener('click', (e) => {
                e.preventDefault();
                showAdminPanel();
                if (isAdminLoggedIn) {
                    loadAdminData();
                }
                // Fechar menu mobile
                document.getElementById('mobile-menu').classList.add('hidden');
                const mobileToggle = document.getElementById('mobile-toggle');
                const icon = mobileToggle.querySelector('i');
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
                mobileToggle.setAttribute('aria-expanded', 'false');
            });

            // Navegação admin
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const tab = item.getAttribute('data-tab');
                    changeAdminTab(tab);
                });
            });

            // Formulários admin
            document.getElementById('add-product-btn').addEventListener('click', () => {
                currentEditingId = null;
                document.getElementById('product-form').reset();
                document.getElementById('product-image-preview').innerHTML = '';
                document.getElementById('product-form-title').textContent = 'Adicionar Produto';
                document.getElementById('product-form-container').classList.remove('hidden');
                hideFormError('product');
            });

            document.getElementById('cancel-product-btn').addEventListener('click', () => {
                document.getElementById('product-form-container').classList.add('hidden');
                hideFormError('product');
            });

            document.getElementById('product-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                hideFormError('product');
                
                const productData = {
                    sb_name: document.getElementById('product-name').value,
                    sb_category: document.getElementById('product-category').value,
                    sb_price: parseFloat(document.getElementById('product-price').value),
                    sb_old_price: document.getElementById('product-old-price').value ? parseFloat(document.getElementById('product-old-price').value) : null,
                    sb_weight: document.getElementById('product-weight').value,
                    sb_brand: document.getElementById('product-brand').value,
                    sb_flavors: document.getElementById('product-flavors').value,
                    sb_benefits: document.getElementById('product-benefits').value,
                    sb_ingredients: document.getElementById('product-ingredients').value,
                    sb_usage: document.getElementById('product-usage').value,
                    sb_description: document.getElementById('product-description').value,
                    sb_images: [],
                    sb_image_url: null
                };

                // Upload de imagem
                const imageFile = document.getElementById('product-image-input').files[0];
                if (imageFile) {
                    try {
                        productData.sb_image_url = await uploadImage(imageFile, 'products');
                        productData.sb_images = [productData.sb_image_url];
                    } catch (error) {
                        console.error('Erro no upload:', error);
                        showFormError('product', 'Erro ao fazer upload da imagem');
                        return;
                    }
                }

                const result = await saveProduct(productData);
                if (result.success) {
                    document.getElementById('product-form-container').classList.add('hidden');
                    showAlert('Produto salvo com sucesso!');
                } else {
                    showFormError('product', result.error);
                }
            });

            document.getElementById('add-category-btn').addEventListener('click', () => {
                currentEditingId = null;
                document.getElementById('category-form').reset();
                document.getElementById('category-image-preview').innerHTML = '';
                document.getElementById('category-form-title').textContent = 'Adicionar Categoria';
                document.getElementById('category-form-container').classList.remove('hidden');
                hideFormError('category');
            });

            document.getElementById('cancel-category-btn').addEventListener('click', () => {
                document.getElementById('category-form-container').classList.add('hidden');
                hideFormError('category');
            });

            document.getElementById('category-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                hideFormError('category');
                
                const categoryData = {
                    sb_code: document.getElementById('category-code').value,
                    sb_name: document.getElementById('category-name').value,
                    sb_description: document.getElementById('category-description').value,
                    sb_image_url: null
                };

                // Upload de imagem
                const imageFile = document.getElementById('category-image-input').files[0];
                if (imageFile) {
                    try {
                        categoryData.sb_image_url = await uploadImage(imageFile, 'categories');
                    } catch (error) {
                        console.error('Erro no upload:', error);
                        showFormError('category', 'Erro ao fazer upload da imagem');
                        return;
                    }
                }

                const result = await saveCategory(categoryData);
                if (result.success) {
                    document.getElementById('category-form-container').classList.add('hidden');
                    showAlert('Categoria salva com sucesso!');
                } else {
                    showFormError('category', result.error);
                }
            });

            // Configurações de frete
            document.getElementById('settings-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                hideFormError('settings');
                
                const settingsData = {
                    sb_shipping_price: parseFloat(document.getElementById('shipping-price').value),
                    sb_free_shipping_limit: parseFloat(document.getElementById('free-shipping-limit').value) || 0
                };

                const result = await saveSettings(settingsData);
                if (result.success) {
                    showAlert('Configurações salvas com sucesso!');
                } else {
                    showFormError('settings', result.error);
                }
            });

            // Configurações de credenciais
            document.getElementById('credentials-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                hideFormError('credentials');
                
                const newUsername = document.getElementById('new-admin-username').value;
                const newPassword = document.getElementById('new-admin-password').value;
                const confirmPassword = document.getElementById('confirm-admin-password').value;

                if (newPassword !== confirmPassword) {
                    showFormError('credentials', 'As senhas não coincidem');
                    return;
                }

                if (newPassword.length < 6) {
                    showFormError('credentials', 'A senha deve ter pelo menos 6 caracteres');
                    return;
                }

                const settingsData = {
                    sb_admin_username: newUsername,
                    sb_admin_password: newPassword,
                    sb_shipping_price: shippingConfig.price,
                    sb_free_shipping_limit: shippingConfig.freeShippingLimit
                };

                const result = await saveSettings(settingsData);
                if (result.success) {
                    showAlert('Credenciais alteradas com sucesso!');
                    // Limpar campos
                    document.getElementById('new-admin-password').value = '';
                    document.getElementById('confirm-admin-password').value = '';
                } else {
                    showFormError('credentials', result.error);
                }
            });

            // Filtros
            document.getElementById('order-status-filter').addEventListener('change', loadOrders);

            // Modal pedido
            document.getElementById('close-order-modal').addEventListener('click', () => {
                document.getElementById('order-details-modal').classList.add('hidden');
            });

            // Configurar uploads
            setupImageUpload('product-image-input', 'product-image-preview');
            setupImageUpload('category-image-input', 'category-image-preview');

            // Atualizar display inicial
            updateShippingDisplay();
            updateCredentialsDisplay();
        }
    </script>
</body>
</html>
